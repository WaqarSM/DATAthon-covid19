"use strict";angular.module("onesite.health.yellowCard",[]);
"use strict";!function(){function e(o,n,r){var t=this;t.component="phuForm",t.phuInfo={},t.errorMessage="",t.errorOccurred=!1,t.iconAvailable=!0,t.setComponent=function(e){t.component=e},t.getHealthUnit=function(e){return l(),e=n.transformPostalCode(e),n.validatePostalCode(e)?n.queryForPHU(e).then(u).catch(h):(i(a),o.resolve(!1))},t._setError=i,t._clearError=l,t._formatPostalCode=c,t._isOnIcon=s,t._handleResponse=u,t._handleAPIError=h;var a="We couldnâ€™t find that postal code in Ontario. Please use one of these formats: M5V 3Y3 or M5V3Y3.";function c(e){return e.slice(0,3)+" "+e.slice(3,6)}function i(e){var o=e!==a?"api":"malformed";window.ga&&ga("send","event",{eventCategory:"icon-lookup",eventAction:"error",eventLabel:o}),t.errorMessage=e,t.errorOccurred=!0}function l(){t.errorOccurred=!1,t.errorMessage=""}function s(e){switch(e){case"https://drhd.icon.ehealthontario.ca":case"https://hrhd.icon.ehealthontario.ca":case"https://nrph.icon.ehealthontario.ca":window.ga&&ga("send","event",{eventCategory:"icon-lookup",eventAction:"not-on-icon",eventLabel:e}),t.iconAvailable=!1;break;default:t.iconAvailable=!0}}function u(e){return e.status&&404===e.status?i(a):(e.postalCode=c(e.postalCode),s(e.iconUrl),e.iconUrl=e.iconUrl+"/#!/welcome","fr"===r.currentLanguage.get()&&(e.iconUrl=e.iconUrl+"?lang=fr"),t.phuInfo=e,t.setComponent("result")),e}function h(e){return i("We are currently experiencing a technical error and we are working on fixing it"),o.resolve(!1)}}angular.module("onesite.health.yellowCard").controller("HealthUnitController",e),e.$inject=["$q","healthUnitLookupAPI","languageService"]}();
"use strict";angular.module("onesite.health.yellowCard").directive("odsHealthUnitLookup",function(){return{link:function(){},templateUrl:"/onesite_modules/onesite-health/yellowCard/partials/healthUnitLookup.html",restrict:"EA",controller:"HealthUnitController",controllerAs:"healthunit",replace:!0}});
"use strict";!function(){function t(e,r,a){return{transformPostalCode:function(t){return(t=t.replace(/\s+/g,"")).toUpperCase()},validatePostalCode:u,queryForPHU:function(t){if(!u(t))return a.resolve({status:400,error:"Invalid Postal Code"});var n=e["onesite.health"],o=n.baseUrl+n.baseEndpoint+n.phuEndpoint+"/"+t;return r.get(o).then(function(t){return t.data}).catch(function(t){if(404===t.status)return{status:404,error:"Postal Code was not found"};throw new Error("Could not connect to api")})}};function u(t){return/^[ABCEGHJKLMNPRSTVXY]\d[ABCEGHJKLMNPRSTVWXYZ]( )?\d[ABCEGHJKLMNPRSTVWXYZ]\d$/i.test(t)}}angular.module("onesite.health.yellowCard").factory("healthUnitLookupAPI",t),t.$inject=["apiEndpointConfig","$http","$q"]}();
/*
     FILE ARCHIVED ON 15:16:25 Mar 09, 2020 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 21:26:01 Mar 20, 2020.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  captures_list: 1281.132
  load_resource: 102.066
  exclusion.robots.policy: 0.19
  CDXLines.iter: 104.227 (4)
  PetaboxLoader3.datanode: 366.069 (6)
  LoadShardBlock: 399.633 (4)
  esindex: 0.014
  exclusion.robots: 0.205
  PetaboxLoader3.resolve: 100.441 (2)
  RedisCDXSource: 1.793
*/