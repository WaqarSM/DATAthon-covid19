"use strict";!function(c){c(function(){var s=["a[href]","area[href]","a.close-reveal-modal","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","*[tabindex]","*[contenteditable]"].join(","),d=c(".f-dropdown").find(s).attr("tabindex","-1"),o="aria-expanded",e=function(e){var t,a,i="tabindex",n=c("#"+e.attr("data-dropdown")),o=c(s,n);o&&(a=(t=o.eq(0)).attr(i),o.attr(i,"0"===a?"-1":"0"),"0"!==a&&t.focus()),"1"!==n.attr("data-accessibility-processed")&&(c(document).click(function(e){e.target!==n.get(0)&&!1===c(d,n).is(":focus")&&o.attr(i,"-1")}),n.attr("data-accessibility-processed","1"))};c("a[data-dropdown]").on("click",function(){e(c(this))});function t(e){(e=e.find("h1:first-of-type")).length&&(e.is(":focusable")||e.attr("tabindex",-1).on("focusout",function(){c(this).removeAttr("tabindex"),"#ng-view"===window.location.hash&&(window.location.hash="")}),e.focus())}c(".reveal-modal").find(s).attr("tabindex","-1").end().append('<a class="close-reveal-modal" aria-label="close modal">&#215;</a>').attr(o,"false"),jQuery.extend(jQuery.expr[":"],{focusable:function(e,t,a){var i=c(e);return i.is(":input:enabled, a[href], area[href], object, [tabindex]")&&!i.is(":hidden")}}),c(document).on("opened.fndtn.reveal","[data-reveal]",function(){var t,a,i,e=c(this).attr(o,"true"),n=c(s,e).attr("tabindex","0").eq(0).focus().end();"1"!==e.attr("data-accessibility-processed")&&(t=e,i=(a=n).last(),c(a,t).keydown(function(e){9!==e.keyCode||e.shiftKey?9===e.keyCode&&e.shiftKey?c(this).get(0)===a.get(0)&&(i.last().focus(),e.preventDefault()):13===e.keyCode&&!0===c(this).hasClass("close-reveal-modal")&&c("a.close-reveal-modal",t).click():c(this).get(0)===i.get(0)&&(a.get(0).focus(),e.preventDefault())}),e.attr("data-accessibility-processed","1"))}).on("closed.fndtn.reveal","[data-reveal]",function(){c(s,e).attr("tabindex","-1");var e=c(this).attr(o,"false");c('a[data-reveal-id = "'+e.attr("id")+'"]').focus()});var a=c("#skip-link");navigator.userAgent.match(/iPhone|iPad|iPod/i)?a.on("click",function(){setTimeout(function(){t(c("#ng-view"))},50)}):a.on("click",function(e){t(c("#ng-view")),e.preventDefault()}),window.Onesite=window.Onesite||{},window.Onesite.libs=window.Onesite.libs||{},window.Onesite.libs.accessibility={addAccessibilityToDropDown:e,addKeydown:function(e,t){var a=c("#"+t.attr("data-dropdown")),i=c(s,a),n=a.find(i).last(),o=!1;switch(e.keyCode){case 9:var d;e.shiftKey?e.shiftKey&&(d=i):d=n,d&&document.activeElement===d.get(0)&&(o=!0);break;case 27:o=!0}o&&(t.click().focus(),e.preventDefault())}}})}(jQuery);
"use strict";angular.module("onesite.app",["ngRoute","ngAnimate","ngSanitize","pascalprecht.translate","ngCookies","ngMessages","onesite.factories","onesite.services","onesite.filters","onesite.directives","onesite.controllers","onesite.angular.foundation","onesite.search","onesite.contact.us","onesite.analytics","onesite.body","onesite.live.chat","onesite.holiday.pay.calculator","onesite.health.yellowCard"]).provider("staticPageConfig",["defaultMinisterFooterProvider","defaultContactProvider",function(e,t){var a={contactUs:{en:{routeName:"contactUsEn",alias:"feedback/contact-us",core:{lang:"en",type:"contact_us",title:"Government of Ontario"},translation:"commentaires/pour-nous-joindre",ministerFooter:e.$get().en,contact:t.$get().en},fr:{routeName:"contactUsFr",alias:"commentaires/pour-nous-joindre",core:{lang:"fr",type:"contact_us",title:"Gouvernement de l’Ontario"},translation:"feedback/contact-us",ministerFooter:e.$get().fr,contact:t.$get().fr}}};this.$get=function(){return a}}]).provider("urlConfig",["staticPageConfigProvider",function(e){var t="undefined"!=typeof Modernizr&&Modernizr.history,a=!1;"Microsoft Internet Explorer"===navigator.appName&&(new RegExp("MSIE ([6-9])").test(navigator.userAgent)&&(a=!!window.XDomainRequest));var n={};n.searchResults={en:{default:"search/search-results",getPath:function(){return n.searchResultsEn.path}},fr:{default:"fr/recherche/resultats-de-recherche",getPath:function(){return n.searchResultsFr.path}}},n.gazette={en:{default:"search/ontario-gazette",getPath:function(){return n.gazetteEn.path}},fr:{default:"fr/recherche/gazette-ontario",getPath:function(){return n.gazetteFr.path}}},n.orderInCouncil={en:{default:"search/orders-in-council",getPath:function(){return n.orderInCouncilEn.path}},fr:{default:"fr/recherche/decrets",getPath:function(){return n.orderInCouncilFr.path}}},n.landRegistration={en:{default:"search/land-registration",getPath:function(){return n.landRegistrationEn.path}},fr:{default:"fr/recherche/enregistrement-immobilier",getPath:function(){return n.landRegistrationFr.path}}},n.featsDetail={en:{default:"locations/employment-training/details",getPath:function(){return n.featsEn.path}},fr:{default:"fr/locations/emploi-formation/details",getPath:function(){return n.featsFr.path}}},n.openData={en:{default:"search/data-catalogue",getPath:function(){return n.openDataEn.path}},fr:{default:"fr/recherche/donnees-publiques",getPath:function(){return n.openDataFr.path}}},n.tradeCalendar={en:{default:"tradecalendar/search",getPath:function(){return n.tradeCalendarEn.path}},fr:{default:"fr/calendriercommerce/recherche",getPath:function(){return n.tradeCalendarFr.path}}},n.gazetteEn={path:"/search/ontario-gazette/:alias?",contentType:"searchResults"},n.gazetteFr={path:"/:lang?/recherche/gazette-ontario/:alias?",contentType:"searchResults"},n.orderInCouncilEn={path:"/search/orders-in-council/:alias?",contentType:"searchResults"},n.orderInCouncilFr={path:"/:lang?/recherche/decrets/:alias?",contentType:"searchResults"},n.orderInCouncilDetailEn={path:"/orders-in-council/:alias*?",contentType:"orderInCouncilDetail"},n.orderInCouncilDetailFr={path:"/:lang?/decrets/:alias*?",contentType:"orderInCouncilDetail"},n.landRegistrationEn={path:"/search/land-registration/:alias?",contentType:"searchResults"},n.landRegistrationFr={path:"/:lang?/recherche/enregistrement-immobilier/:alias?",contentType:"searchResults"},n.landRegistrationDetailEn={path:"/land-registration/:alias",contentType:"landRegistrationDetail"},n.landRegistrationDetailFr={path:"/:lang?/enregistrement-immobilier/:alias",contentType:"landRegistrationDetail"},n.featsEn={path:"/locations/employment-training/details/:alias?",contentType:"featsDetail"},n.featsFr={path:"/fr/locations/emploi-formation/details/:alias?",contentType:"featsDetail"},n.openDataEn={path:"/search/data-catalogue/:alias?",contentType:"searchResults"},n.openDataFr={path:"/:lang?/recherche/donnees-publiques/:alias?",contentType:"searchResults"},n.openDataDetailEn={path:"/data/:alias",contentType:"openDataDetail"},n.openDataDetailFr={path:"/:lang?/donnees/:alias",contentType:"openDataDetail"},n.searchResultsEn={path:"/search/:alias",contentType:"searchResults"},n.searchResultsFr={path:"/:lang?/recherche/:alias",contentType:"searchResults"},n.openTable={path:"/opentable/:alias*?",contentType:"openTable"},n.tradeCalendarEn={path:"/tradecalendar/search/:alias?",contentType:"searchResults"},n.tradeCalendarDetailEn={path:"/tradecalendar/:alias*?",contentType:"tradeCalendarDetail"},n.tradeCalendarFr={path:"/:lang?/calendriercommerce/recherche/:alias?",contentType:"searchResults"},n.tradeCalendarDetailFr={path:"/:lang?/calendriercommerce/:alias*?",contentType:"tradeCalendarDetail"},n.faq={path:"/:lang?/faq/:alias",contentType:"faq"},n.document={path:"/:lang?/document/:alias*?",contentType:"document"},n.foodland={path:"/:lang?/foodland/:alias*?",contentType:"foodland"},n.page={path:"/:lang?/page/:alias*?",contentType:"page"},angular.forEach(e.$get(),function(e){angular.forEach(e,function(e,t){n[e.routeName]={path:("en"===t?"/":"/:lang?/")+e.alias,contentType:"staticPage"}})}),n.article={path:"/:alias*",contentType:"article"},this.$get=function(){return{html5HistorySupported:t,hideHashBang:!0,pathPrefix:"",routes:n,useXdomainRequest:a}}}]).provider("translationConfig",function(){var a={};this.$get=function(){return{languageOption:{en:{regexp:/^en/i,title:"english",alternate:"fr"},fr:{regexp:/^fr/i,title:"français",alternate:"en"}},setTranslations:function(e,t){a[e]=t},content:a}}}).config(["$routeProvider","$translateProvider","$locationProvider","$compileProvider","$httpProvider","urlConfigProvider","localStorageServiceProvider","env",function(e,t,a,n,r,o,i,l){var s,c=function(){return s.template};e.when("/foodland-ontario",{templateUrl:"../splash/partials/splash-foodland.html",controller:"SplashController",controllerAs:"FoodlandSplash"}),e.when("/fr/foodland-ontario",{templateUrl:"../splash/partials/splash-foodland.html",controller:"SplashController",controllerAs:"FoodlandSplashFrench"}),e.when("/welcome-serviceontario",{templateUrl:"../splash/partials/splash-serviceontario.html",controller:"SplashController",controllerAs:"ServiceOntarioSplash"}),e.when("/fr/welcome-serviceontario",{templateUrl:"../splash/partials/splash-serviceontario.html",controller:"SplashController",controllerAs:"ServiceOntarioSplash"}),angular.forEach(o.$get().routes,function(t){angular.isString(t.path)&&""!==t.path.trim()&&e.when(t.path,angular.extend({resolve:{"parse url and fetch data":["routeService",function(e){if((s=e.getRouter(t.contentType,null,null,null)).promise)return s.promise}]},template:c},angular.isObject(t.options)?t.options:{}))}),e.when("/",{resolve:{"IE9 routing fix and load dashboard route":["routeService",function(e){if((s=o.$get().hideHashBang&&!o.$get().html5HistorySupported?e.getRouterAbsUrl():e.getRouter("#!",null,null,null)).promise)return s.promise}]},template:c}).otherwise({redirectTo:"/"}),a.html5Mode(o.$get().hideHashBang&&o.$get().html5HistorySupported),a.hashPrefix("!"),i.setPrefix("onesiteAppLs"),"develop"!==l&&"stage"!==l||t.useMissingTranslationHandler("missingTranslationHandler"),"production"!==l&&"stage"!==l||n.debugInfoEnabled(!1),r.useApplyAsync(!0),t.useSanitizeValueStrategy("escape")}]).factory("missingTranslationHandler",["languageService",function(e){return e.reportMissingTranslation}]).run(["$parse",function(a){var n,r;navigator.userAgent.match(/iPad/i)&&(document.addEventListener("touchstart",function(){n=!0}),document.addEventListener("touchmove",function(){n&&(r=!0)}),document.addEventListener("touchend",function(e){if(n&&!r){var t=a("tagName")(e.target);"a"===(t=angular.isString(t)?t.toLowerCase():null)&&(e.preventDefault(),e.target.click())}r=n=!1}))}]).run(["$route","$rootScope","$location",function(r,o,i){var l=i.path;i.path=function(e,t){if(!1===t)var a=r.current,n=o.$on("$locationChangeSuccess",function(){r.current=a,n()});return l.apply(i,[e])}}]);
"use strict";angular.module("onesite.config",[]).constant("env","production").constant("externalLinks",{welcome:{en:"/page/government-ontario",fr:"/fr/page/gouvernement-de-lontario"},"contact-us":{en:"feedback/contact-us",fr:"fr/commentaires/pour-nous-joindre"}}).constant("noticeLinks",{en:{"about Ontario":"/page/about-ontario",accessibility:"/page/accessibility",news:"https://web.archive.org/web/20200316130606/http://news.ontario.ca/newsroom/en",privacy:"/page/privacy-statement","terms of use":"/page/terms-use",copyright:"/page/copyright-information-c-queens-printer-ontario"},fr:{"l'Ontario en bref":"/fr/page/lontario-en-bref","accessibilité":"/fr/page/accessibilite",nouvelles:"https://web.archive.org/web/20200316130606/http://news.ontario.ca/newsroom/fr","confidentialité":"/fr/page/declaration-concernant-la-protection-de-la-vie-privee","conditions d’utilisation":"/fr/page/conditions-dutilisation",copyright:"/fr/page/droits-dauteur-imprimeur-de-la-reine-pour-lontarioc"}}).constant("apiEndpointConfig",{"onesite.app":{apiServiceCrossDomain:"https://web.archive.org/web/20200316130606/https://api.ontario.ca",apiService:"api/drupal",remoteStorageService:"/api/",timeout:1e4},"onesite.search":{apiServiceCrossDomain:"https://web.archive.org/web/20200316130606/https://api.ontario.ca/es/onesite",search:"_search/template"},"onesite.book":{apiServiceCrossDomain:"https://web.archive.org/web/20200316130606/https://api.ontario.ca/api/book",apiService:"api/book"},"onesite.live.chat":{apiServiceCrossDomain:"https://web.archive.org/web/20200316130606/https://api.ontario.ca",apiService:"api/services/chat/availability"},"onesite.feats":{apiServiceCrossDomain:"https://web.archive.org/web/20200316130606/https://api.ontario.ca/api/locations/feats",apiServiceCrossDomainFr:"https://web.archive.org/web/20200316130606/https://api.ontario.ca/api/locations/fr/feats"},"onesite.map":{solarPlacesApi:"https://web.archive.org/web/20200316130606/https://api.ontario.ca"},"onesite.datatable":{es:{apiServiceCrossDomain:"https://web.archive.org/web/20200316130606/https://api.ontario.ca/es/datatable",search:"_search/template"},drupal:{apiService:"/api/data"},pageSizeMax:20},"onesite.health":{baseUrl:"https://web.archive.org/web/20200316130606/https://stage.api.ontariogovernment.ca",baseEndpoint:"/api/health",phuEndpoint:"/phulookup/postalcode"}}).constant("lazyloadFiles",{"onesite.translations.fr":["/onesite_modules/onesite-translations-fr/onesite-translations-fr.min.js"],"onesite.moment":["/onesite_modules/onesite-moment/onesite-moment.min.js"],"onesite.tax.credit.calculator":["/onesite_modules/onesite-tax-credit-calculator/onesite-tax-credit-calculator.min.js"],"onesite.immunization.tool":["/onesite_modules/onesite-immunization-tool/onesite-immunization-tool.min.js"],"onesite.book":["/onesite_modules/onesite-book/onesite-book.min.js"],"onesite.google.map":["/onesite_modules/onesite-google-map/onesite-google-map.min.js"],"onesite.datatable":["/onesite_modules/onesite-datatable/onesite-datatable.min.js","/vendor/angular-ui-grid/ui-grid.min.js","/vendor/angular-ui-grid/ui-grid.min.css"]}).constant("apiKeys",{googleMaps:"AIzaSyCrBqRmI9crs4rllE36zpsJ62QHM6bkaHA",reCAPTCHAv2:"6Ldgg2cUAAAAAPqnfevZmYRPtb0GguOEfz6ip0ec"}).constant("enableRouting",!1).constant("showKitchenSink",!1);
"use strict";angular.module("onesite.controllers",[]).controller("MainController",["$scope","redirectService",function(t,e){var i=this;i.node={content:{lang:"en"}},i.update={node:function(t){i.node=t,e.isAngularRedirect().isHistoryRedirect&&angular.forEach(i.search.resetInput,function(t){angular.isFunction(t)&&t()}),t.content.titleMetatag?document.title=t.content.titleMetatag:document.title=t.content.title?[t.content.title,"|",i.title].join(" "):i.title,angular.isFunction(i.update.header)&&i.update.header(t.content)}},i.search={resetInput:[]},i.title="Ontario.ca",t.$on("h2s_loaded",function(){if(i.node.content.toc){Array.prototype.last||(Array.prototype.last=function(){return this[this.length-1]});for(var n,t=[];"faqs"===i.node.content.toc.last().type||"section-related"===i.node.content.toc.last().section.id;)"faqs"===i.node.content.toc.last().type&&(n=i.node.content.toc.last().section.index),t.push(i.node.content.toc.pop());var o=[],c=0;angular.element(document.getElementById("pagebody")).find("h2").each(function(){var t=this.id,e=angular.element(this);/section-\d+/.test(t)&&(t="section-"+(c+=c===n?1:0),e.attr("id",t)),o.push({title:e.text(),section:{id:t}}),c++}),t.forEach(function(t){o.push(t)}),i.node.content.toc=o}})}]);
"use strict";angular.module("onesite.directives",[]).directive("compileHtml",["$compile","$parse","analyticsAttributeService",function(r,o,s){var a=function(e,t,n,l){if(n=n||"div",angular.isString(t)&&"COMPILE-HTML"===o("context.tagName")(e)){var i=s("<"+n+">"+t+"</"+n+">",this.category),a=l?angular.element(i):r(i)(this);e.empty(),e.append(a)}};return{scope:{html:"=",category:"@",init:"=",tag:"="},restrict:"E",replace:!0,link:function(l,i){a.call(l,i,l.html,l.tag),null===l.init&&(l.init=function(e,t,n){a.call(l,i,e,t,n)})}}}]).directive("compareTo",[function(){return{restrict:"A",require:"ngModel",scope:{otherModelValue:"=compareTo"},link:function(t,e,n,l){l.$validators.compareTo=function(e){return e===t.otherModelValue},t.$watch("otherModelValue",function(){l.$validate()})}}}]).directive("onesitePrintHtml",["$timeout","scrollService",function(d,m){return{scope:!0,restrict:"E",replace:!0,template:'<div><div ng-include="templateUrl"></div></div>',transclude:!0,link:function(n,l,e,t,i){var a,r,o,s,c;n.templateUrl=e.templateUrl,n.bodyCss=angular.isString(e.bodyCss)&&""!==e.bodyCss.trim()?e.bodyCss:null;var u=function(){i(n,function(e){d(function(){var t=["<div>"];angular.forEach(e,function(e){t.push(e.outerHTML||"")}),t.push(["</div>"]),o=angular.element(t.join("")),angular.element("body").append(o),n.bodyCss&&angular.element("body").addClass(n.bodyCss),window.print(),s&&(document.title=c),angular.element("#ng-view").css("display",a),angular.element("#ng-view-header").css("display",r),o.remove(),n.bodyCss&&angular.element("body").removeClass(n.bodyCss),m.scrollToElement(l,null,10)},0,!1)})};n.print=function(){(s=angular.isString(e.htmlTitle)?e.htmlTitle:null)&&(c=document.title,document.title=s),a=angular.element("#ng-view").css("display"),r=angular.element("#ng-view-header").css("display"),angular.element("#ng-view").css("display","none"),angular.element("#ng-view-header").css("display","none"),u()}}}}]);
"use strict";angular.module("onesite.factories",["onesite.contentType","onesite.component"]).factory("getterFactory",["$parse",function(n){var e={},t={};return e.instantiate=function(e){return t[e]||(t[e]=n(e)),t[e]},e}]).factory("lazyloaderFactory",["lazyloaderService","$q",function(e,t){var n={},o={jsonp:e.jsonp,javascript:e.runScript,function:e.executeFunction,module:e.addModule},r=function(e){return t=e,r=!1,function(e){var n={};return r||(n=o[t].apply(null,e),r=n.isSuccessful),n.promise};var t,r},a={};return n.instantiate=function(e,n){return n?(a[n]||(a[n]=r(e)),a[n]):r(e)},n.load=function(){var e=t.defer(),n=arguments[0](Array.prototype.slice.call(arguments,1));return n?n.then(function(){e.resolve()},function(){e.resolve()}):e.resolve(),e.promise},n}]);
"use strict";angular.module("onesite.filters",[]).filter("removeInjectedParagraphTag",function(){return function(r){return angular.isString(r)?r.trim().replace(/\r?\n/g,"").replace(/^<(p)[^>]*?>(.+)<\/\1>/im,"$2"):r}}).filter("formatNumber",["numberService",function(r){return r.formatNumber}]).filter("trim",["stringService",function(r){return r.trim}]).filter("slice",["listService",function(r){return r.slice}]).filter("tel",["stringService",function(r){return r.toTel}]).filter("postalCode",["stringService",function(r){return r.toPostalCode}]).filter("pick",["listService",function(r){return r.pick}]).filter("join",["stringService",function(r){return r.join}]).filter("chooseSmall",["numberService",function(r){return r.min}]).filter("localDate",[function(){return function(){return new Date}}]).filter("equals",function(){return angular.equals}).filter("isNumber",function(){return angular.isNumber}).filter("isString",function(){return angular.isString}).filter("isNonEmptyString",function(){return function(r){return angular.isString(r)&&""!==r.trim()}}).filter("socialMedia",function(){var e={facebook:function(r,t){return"//www.facebook.com/sharer.php?u=%2F%2F"+r+"&title="+t},twitter:function(r,t){return"//twitter.com/intent/tweet?url=%2F%2F"+r+"&text="+t}};return function(r,t,n){return e[r](t,n)}}).filter("strToDate",["stringService",function(t){return function(r){return angular.isString(r)?t.strToDate(r.split(" ")[0]):null}}]).filter("onesiteDateFormat",["$filter",function(t){var n={0:"janvier",1:"février",2:"mars",3:"avril",4:"mai",5:"juin",6:"juillet",7:"août",8:"septembre",9:"octobre",10:"novembre",11:"décembre"},e={en:function(r){return t("date")(r.getTime(),"MMMM d, yyyy")},fr:function(r){return[r.getDate(),n[r.getMonth()],r.getFullYear()].join(" ")}};return function(r,t){return e[t](r)}}]).filter("getStringBeforeFirstDelimiter",function(){return function(r,t,n){return n=n||!1,angular.isString(r)?r.split(t).map(function(r){return n?r.trim():r})[0]:null}}).filter("capitalize",["stringService",function(r){return r.capitalize}]).filter("numericOnly",["stringService",function(r){return r.numericOnly}]).filter("newArray",[function(){return function(r){return angular.isNumber(r)&&0<r?new Array(r):[]}}]).filter("translate2",["languageService",function(n){return function(r,t){return n.translate2(t?[t,r].join("."):r,n.currentLanguage.get())||r}}]).filter("html",["stringService",function(r){return r.html}]).filter("sprintf",["stringService",function(r){return r.sprintf}]).filter("parseInt",[function(){return function(r){return angular.isString(r)&&Foundation.libs.abide.settings.patterns.integer.test(r)?parseInt(r):null}}]).filter("urlEncode",[function(){return window.encodeURIComponent}]).filter("htmlToPlaintext",function(){return function(r){return r?String(r).replace(/<[^>]+>/gm,""):""}}).filter("groupBy",["cacheMachine",function(i){return function(r,t){if(!r)return{};var n=JSON.stringify(r)+t;if(i.cached(n))return i.cached(n);var e={};return r.forEach(function(r){e[r[t]]||(e[r[t]]=[]),e[r[t]].push(r)}),i.cache(n,e),e}}]).filter("startsWith",["stringService",function(r){return r.getStartLetter(r)}]).filter("URLslug",["stringService",function(t){return function(r){return t.sanitizePunctuation(t.replaceAccentedCharacters(r)).toLowerCase()}}]);
"use strict";!function(n){"function"==typeof n&&n(document).foundation({accordion:{multi_expand:!0,toggleable:!0}})}(jQuery),window.Onesite={libs:{}};
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){function e(){"use-strict";var e,t=this.parentNode,o=arguments.length;if(t)for(o||t.removeChild(this);o--;)"object"!==(void 0===(e=arguments[o])?"undefined":_typeof(e))?e=this.ownerDocument.createTextNode(e):e.parentNode&&e.parentNode.removeChild(e),o?t.insertBefore(this.previousSibling,e):t.replaceChild(e,this)}Element.prototype.replaceWith||(Element.prototype.replaceWith=e),CharacterData.prototype.replaceWith||(CharacterData.prototype.replaceWith=e),DocumentType.prototype.replaceWith||(DocumentType.prototype.replaceWith=e),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null===this)throw new TypeError('"this" is null or not defined');var t=Object(this),o=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=arguments[1],n=0;n<o;){var i=t[n];if(e.call(r,i,n,t))return i;n++}}})}();
"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};angular.module("onesite.services",["duScroll","LocalStorageModule","uuid","oc.lazyLoad","onesite.config","onesite.moment"]).factory("scopeService",["$rootScope",function(e){var u={getMainController:function(){return angular.isObject(e.$$childHead)&&angular.isObject(e.$$childHead.mainController)?e.$$childHead.mainController:null}};return u}]).factory("routeService",["$route","$location","$parse","$rootScope","enableRouting","translationConfig","stringService","contentTypeFactory","redirectService","scopeService",function(i,c,s,e,t,f,l,g,r,o){var u={},E=function(e,u,t,r){var n=i.current.params;n.alias=l.removeTrailingSlash(t||c.path().replace(/^\//,"")),n.aliasLang=u||i.current.params.lang,n.absUrl=c.absUrl(),n.contentType=e,r=r||s("current.params")(i);var a=g.instantiate(n,r);return a.promise&&a.promise.then(function(e){var u=s("update.node")(o.getMainController());e&&angular.isFunction(u)&&u(e)}),a};u.getRouter=E,u.getRouterAbsUrl=function(){var e,u=3,t=c.$$absUrl.split("/"),r=t[u]?t[u].toLowerCase():null;f.languageOption[r.toLowerCase()]&&(e=r.toLowerCase(),u++),r=t.slice(u);var n=[];for(var a in r){if(!r[a]||""===r[a])break;n.push(r[a])}var i=(n=(n=n.join("/")).split("#")[0]).split("?")[1],s={};if(i)for(i=i.split("&"),a=0;a<i.length;a++){var l=i[a].split("=");l[0]&&l[1]&&(s[l[0]]=l[1])}s.lang=e,r=["",n=n.split("?")[0]].join("/");var o=g.determineContentType(r);return e&&(n=[e,n].join("/")),E(o,e,n,s)};var d,n,a=(d=!1,n=function(e){var u,t,r,n,a=(t=e,n=s("tagName")(t.target),"a"===(n=angular.isString(n)?n.toLowerCase():null)?r=t.target:"span"!==n&&"cite"!==n||(r=$(t.target).closest("a")[0]),u=r,angular.isFunction(s("getAttribute")(u))?u.getAttribute("href"):null);a&&(d=a)},t||e.$on("$locationChangeStart",function(e,u){!1!==d&&(r.isSoftRedirect(d)?t||g.isContentTypeEnabled(g.determineContentType(d))||(e.preventDefault(),window.location.href=u):r.isHardRedirect(d)?(e.preventDefault(),window.location.href=u):r.isJavascript(d)?angular.noop():/^#/.test(d)?angular.noop():e.preventDefault(),d=!1)}),function(e){t||(angular.isFunction(document.addEventListener)?angular.element(e).bind("click",n):$(e).on("click",n))});return u.regulateRedirect=a,u}]).factory("redirectService",["$rootScope","$parse","$location","$window","$timeout","urlConfig",function(e,u,r,t,n,a){var i={},s=new RegExp("^"+a.pathPrefix+"/[^/]"),l=/^(http|https):\/\/([^\/].*)/,o=/^\/\/[^\/]/,c=/^(.\/|..\/)/,f=/^(.*legacy\/)?(.*)/,g=/^(.*\/\/.*?\/)(.*)/,E=/^javascript/,d=function(e){return l.test(e)||o.test(e)};i.isHardRedirect=d;var p=function(e){return s.test(e)};i.isSoftRedirect=p;i.isJavascript=function(e){return E.test(e)};var F,b,h,A,v,C,D,m,y,S,B=angular.isFunction(document.addEventListener)?(v={},C={},D=u("params.absUrl"),m=u("href"),y=u("tagName"),S=function(){h=!0,v[A]=t.scrollY||document.documentElement.scrollTop+angular.element("body")[0].offsetHeight-t.innerHeight},e.$on("$routeChangeStart",function(e,u,t){A=D(t),i.referrer=A}),document.addEventListener("click",function(e){var u,t=y(e.target);"a"===(t=angular.isString(t)?t.toLowerCase():null)?u=e.target:"span"===t&&(u=$(e.target).closest("a")[0]);var r=m(u),n=d(r)||p(r);angular.isString(r)&&n&&S()}),e.$on("$routeChangeSuccess",function(e,u,t){C.isHistoryRedirect=t&&!h||!1,C.isHistoryRedirect?C.scrollY=v[D(u)]:C.scrollY=null,h=null}),function(e){return!0===e&&(A=r.$$absUrl,S()),C}):(e.$on("$routeChangeStart",function(){F?b=!1:(F=!0,b=null)}),function(){return{isHistoryRedirect:b,scrollY:null}});return i.isAngularRedirect=B,i.redirectTo=function(e,u){var t;!1!==u&&i.isAngularRedirect(!0),t=e,e=l.test(t)?t.replace(l,"//$2"):t,o.test(e)||c.test(e)?window.location.href=e:a.hideHashBang&&!a.html5HistorySupported?window.location.href=e:r.url(e)},i.redirectToLegacy=function(e){var u=e.replace(g,"$2");u=u===e?"legacy/":u.replace(f,"legacy/$2"),window.location.href=e.replace(g,"$1")+u},i.aliasToPath=function(e){return l.test(e)||o.test(e)?e:[a.pathPrefix,e].join("/")},i.respectProtocol=function(e){return e},i.urlPatterns=function(e){return l.test(e)||o.test(e)||s.test(e)?e:[a.pathPrefix,e].join("/")},i}]).factory("stringService",["$filter","$compile","$location","translationConfig","rfc4122","languageService",function(t,n,u,r,e,c){var a={timestampToDate:function(e,u){return t("date")(e+"000",u)},strToDate:function(e){if(!angular.isString(e))return null;e=e.trim(),e=a.dateDashToDash(e)||a.dateSlashToDash(e);var u=new Date(e);return angular.isString(e)&&!isNaN(u.getTime())?(u.setTime(u.getTime()+60*u.getTimezoneOffset()*1e3),u):null},addLeadingZeroYear:function(e){return("000"+e).slice(-4)}},i=function(e){return("0"+e).slice(-2)};a.addLeadingZeroMonth=i,a.addLeadingZeroDay=i,a.getFullDomain=function(){var e=["^(.*?)(#!)?",u.$$path,".*"].join("");return u.$$absUrl.replace(new RegExp(e),"$1")},a.generateElement=function(e,u,t){var r=n(e)(t);return angular.forEach(u,function(e){r.attr(e.name,e.value)}),r},a.getUuid=function(){return e.v4()};var s=function(e){var u,t,r;return u=e.regexp,t=e.capture,r=e.skipTest,function(e){return function(e,u){return angular.isString(e)&&""!==e.trim()&&(u||this.test(e))}.call(u,e,r)?e.replace(u,t):null}};a.Capture=s,a.toTel=new s({regexp:/^(\d{3})(\d{3})(\d{4})$/,capture:"$1-$2-$3"}),a.toPostalCode=new s({regexp:/^([a-z]\d[a-z])(\d[a-z]\d)$/i,capture:"$1 $2"}),a.escape=new s({regexp:/([^a-z0-9\s])/gi,capture:"\\$1",skipTest:!0}),a.stripDoubleQuotes=new s({regexp:/"(.+)"/,capture:"$1"}),a.dateDashToDash=new s({regexp:/^(\d{4})-(\d{2})-(\d{2})/,capture:"$1-$2-$3"}),a.dateSlashToDash=new s({regexp:/^(\d{4})\/(\d{2})\/(\d{2})/,capture:"$1-$2-$3"}),a.translateQueryAttribute=function(e,u){return r.queryString[e][u]&&r.queryString[e][u][0]?r.queryString[e][u][0]:u},a.trim=function(e,u,t){var r=angular.isObject(t)&&angular.isString(t.prepend)?t.prepend:"",n=angular.isObject(t)&&angular.isString(t.append)?t.append:"";return angular.isString(e)?(e=e.trim()).length>u?[r,e.substring(0,u-r.length-n.length),n].join(""):e:""},a.hasDoubleQuotes=function(e){return/"(.+)"/.test(e)},a.decodeURIComponent=function(e){return angular.isString(e)?decodeURIComponent(e).replace(/\+/g," "):null},a.decodeURIUnescape=function(e){return decodeURI(e).replace(/&quot;/g,'"').replace(/&pos;/g,"'").replace(/&amp;/g,"&")},a.removeTrailingSlash=function(e){return angular.isString(e)?e.replace(/(\/)\1+/,"").replace(/(.*)(\/)$/,"$1"):null},a.join=function(e,u){return angular.isArray(e)?e.join(u||""):""},a.utf8ToBase64=function(e){return btoa(window.unescape(encodeURIComponent(e)))},a.base64ToUtf8=function(e){return decodeURIComponent(window.escape(atob(e)))},a.capitalize=function(e){return angular.isString(e)&&""!==e.trim()?angular.uppercase(e.substring(0,1))+angular.lowercase(e.substring(1)):e},a.numericOnly=function(e){return angular.isString(e)?e.replace(/[^\d]/g,""):e},a.FileMime=function(e){var u,t,r,n,a,i,s,l={PDF:{title:"Portable Document Format file",screenReader:"PDF",cssClass:"icodata-DataDownloadIcon-pdf"},DOC:{title:"Microsoft Word Binary file",screenReader:"Word",cssClass:"icon-file-word"},DOCX:{title:"Microsoft Word Open XML Format Document file",screenReader:"Word",cssClass:"icon-file-word"},JSON:{title:"JavaScript Object Notation file",screenReader:"JSON",cssClass:"icon-file-json"},CSV:{title:"Comma Separated Values file",screenReader:"spread sheet",cssClass:"icon-file-csv"},XML:{title:"Extensible Markup Language file",screenReader:"XML",cssClass:"icon-file-xml"},KML:{title:"Keyhole Markup Language file",screenReader:"KML",cssClass:"icon-file-kml"},KMZ:{title:"Keyhole Markup Zipped file",screenReader:"KMZ",cssClass:"icon-file-kml"},MDB:{title:"Microsoft Access Database file",screenReader:"database",cssClass:"icon-file-mdb"},SHP:{title:"Shapefile",screenReader:"SHP",cssClass:"icon-file-generic"},TXT:{title:"Text file",screenReader:"Text",cssClass:"icon-file-txt"},XLS:{title:"Microsoft Excel Spreadsheet file",screenReader:"excel spread sheet",cssClass:"icon-file-xls"},XLSX:{title:"Microsoft Excel Open XML Speadsheet file",screenReader:"excel spread sheet",cssClass:"icon-file-xls"},GEOJSON:{title:"GeoJSON file",screenReader:"GeoJSON",cssClass:"icon-file-json"},DBF:{title:"Shapefile attribute format",screenReader:"DBF",cssClass:"icon-file-dbf"},GML:{title:"Geography Markup Language file",screenReader:"GML",cssClass:"icon-file-generic"},SHX:{title:"Shapefile shape index format",screenReader:"SHX",cssClass:"icon-file-generic"},PRJ:{title:"Shapefile projection format",screenReader:"PRJ",cssClass:"icon-file-generic"},SBN:{title:"Shapefile spatial index format",screenReader:"SBN",cssClass:"icon-file-generic"},GEOTIFF:{title:"GeoTIFF file",screenReader:"GeoTIFF",cssClass:"icon-file-generic"},OOXML:{title:"Office Open XML file",screenReader:"Open XML",cssClass:"icon-file-generic"},ODP:{title:"Open Document Format file",screenReader:"ODP",cssClass:"icon-file-odb"},ODB:{title:"Open Database Format file",screenReader:"ODB",cssClass:"icon-file-odb"},RDF:{title:"Resource Description Framework file",screenReader:"RDF",cssClass:"icon-file-odb"},ZIP:{title:"Data compression and Archiving format",screenReader:"zip",cssClass:"icon-file-zip"}},o={abbr:"file",title:"file",cssClass:"icon-file-generic"};return u=e.file,t=e.fallback,r=c.currentLanguage.get(),n=angular.isString(u)?u.split("/").pop().split(".").pop():null,a=angular.isString(n)&&""!==n.trim()?angular.uppercase(n):null,i=a&&l[a]?c.translate(l[a].title,r):null,s=a&&l[a]?c.translate(l[a].screenReader,r):null,i?{abbr:a,title:i,screenReader:s,cssClass:l[a].cssClass}:t?o:{}},a.html=function(e){if(angular.isString(e)){var u=angular.element("<div>"+e+"</div>")[0];return u.innerText||u.textContent}return""};var l=new a.Capture({regexp:/^(\d+):(\d+)(\s?am)?$/i,capture:"$1:$2"}),o=new a.Capture({regexp:/^(\d+):(\d+)(\s?pm)?$/i,capture:"$1:$2"});return a.convertTo24Hr=function(e){if(!angular.isString(e))return null;var u,t,r,n;if(e=e.trim(),!(u=l(e))&&(u=o(e))){if(t=u.split(":"),!(0<(r=parseInt(t[0]))))return null;u=[r+(12===r?0:12),t[1]].join(":")}return t=u.split(":"),r=parseInt(t[0]),n=parseInt(t[0]),-1<r&&r<24&&-1<n&&n<60?u:null},a.weekdayCollection={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"},a.monthCollection={0:"January",1:"February",2:"March",3:"April",4:"May",5:"June",6:"July",7:"August",8:"September",9:"October",10:"November",11:"December"},a.sprintf=function(e){var u=e;if(angular.isString(e))for(var t=1;t<arguments.length;t++)u=u.replace(/%s/,arguments[t]);return u},a.csv=function(e,u){e=e.replace(/\s+$/,""),u=u||",";for(var t=new RegExp("(\\"+u+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+u+"\\r\\n]*))","gi"),r=[[]],n=null;n=t.exec(e);){var a,i=n[1];i.length&&i!==u&&r.push([]),a=n[2]?n[2].replace(new RegExp('""',"g"),'"'):n[3],r[r.length-1].push(a)}return r},a.getStartLetter=function(){return function(e,u,t){if(e)return e.filter(function(e){return 0===e[u].indexOf(t)})}},a.replaceAccentedCharacters=function(e){for(var u=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],t=0;t<u.length;t++)e=e.replace(u[t].letters,u[t].base);return e},a.sanitizePunctuation=function(e){return e=e.replace(/([ _.,(!?;:])+/g,"-").replace(/^-/,"").replace(/-$/,"")},a}]).factory("holidayService",[function(){var e={},r=function(e,u){var t;return(t=e,moment().set("year",t)).dayOfYear(u).day()};return e.holidaysList=function(u){function a(e){var u=e%19,t=Math.floor(e/100),r=e%100,n=Math.floor(t/4),a=t%4,i=Math.floor((t+8)/25),s=(19*u+t-n-Math.floor((t-i+1)/3)+15)%30,l=(32+2*a+2*Math.floor(r/4)-s-r%4)%7,o=Math.floor((u+11*s+22*l)/451),c=Math.floor((s+l-7*o+114)/31);return new Date(e,c-1,(s+l-7*o+114)%31+1).toDateString()}return[function(e){return{date:"January 1, "+e+" 12:00:00",english:"New Year's Day",french:"Jour de l'An",type:"federal",stat:!0}},function(e){var u="February 01, "+e,t=new Date(u);return{date:"February "+["16","15","21","20","19","18","17"][u=t.getDay()]+", "+e+" 12:00:00",english:"Family Day",french:"Jour de la Famille",type:"provincial",stat:!0}},function(e){var u,t=new Date(a(e)),r=t.getMonth()+1===3?"March":"April",n=t.getDate();1===n?(u="30",r="March"):2===n?(u="31",r="March"):u=(n-2).toString();u.length<2&&(u="0"+u);return{date:r+" "+u+", "+e+" 12:00:00",english:"Good Friday",french:"Vendredi saint",type:"federal",stat:!0}},function(e){var u=new Date(a(e)),t=u.getMonth()+1===3?"March":"April",r=u.getDate(),n=(r+1).toString();31===r&&(n="01",t="April");n.length<2&&(n="0"+n);return{date:t+" "+n+", "+e+" 12:00:00",english:"Easter Monday",french:"Lundi de Pâques",type:"provincial",stat:!1}},function(e){var u="May 01, "+e,t=new Date(u);return{date:"May "+["23","22","21","20","19","18","24"][u=t.getDay()]+", "+e+" 12:00:00",english:"Victoria Day",french:"Fête de la Reine",type:"federal",stat:!0}},function(e){var u,t={date:"July 1, "+e+" 12:00:00",english:"Canada Day",french:"Fête du Canada",type:"federal",stat:!0};u=function(e){if(e%4==0&&e%100!=0||e%400==0)return!0}(e)?r(e,183):r(e,182);0===u&&(t.date="July 2, "+e+" 12:00:00");return t},function(e){var u="August 01, "+e,t=new Date(u);return{date:"August "+["02","01","07","06","05","04","03"][u=t.getDay()]+", "+e+" 12:00:00",english:"Civic Holiday",french:"Premier lundi d'août",type:"provincial",stat:!1}},function(e){var u="September 01, "+e,t=new Date(u);return{date:"September "+["02","01","07","06","05","04","03"][u=t.getDay()]+", "+e+" 12:00:00",english:"Labour Day",french:"Fête du Travail",type:"federal",stat:!0}},function(e){var u="October 01, "+e,t=new Date(u);return{date:"October "+["09","08","14","13","12","11","10"][u=t.getDay()]+", "+e+" 12:00:00",english:"Thanksgiving",french:"Action de grâces",type:"federal",stat:!0}},function(e){return{date:"November 11, "+e+" 12:00:00",english:"Remembrance Day",french:"Jour du Souvenir",type:"federal",stat:!1}},function(e){return{date:"December 25, "+e+" 12:00:00",english:"Christmas Day",french:"Noël",type:"federal",stat:!0}},function(e){return{date:"December 26, "+e+" 12:00:00",english:"Boxing Day",french:"Lendemain de Noël",type:"provincial",stat:!0}}].map(function(e){return e(u)})},e}]).factory("numberService",["languageService",function(i){var e={},s=function(e,u,t){u=(u||"en").toLowerCase();var r=(e+"").split("."),n=r[0].split(".")[0].split(/(?=(?:...)*$)/),a=[];$(n).filter(function(e,u){return u}).each(function(e,u){a.push(u)});var i=1<a.length?a.join("fr"===u?" ":","):a;if(void 0!==t){20<(t=Math.abs(t))&&(t=20)}else t=void 0!==r[1]?r[1].length:0;var s="00000000000000000000";r[1]&&(s=r[1]+s.slice(r[1].length));var l=s.slice(0,-(s.length-t));return t&&(i+=("fr"===u?",":".")+l),i+""};e.formatNumber=s;var u=function(e){return function(n,a){angular.forEach(n,function(e,u){e.e=u,e.factor=Math.pow(a,e.e)});return function(e,u,t){if((!angular.isNumber(t)||t<0)&&(t=0),angular.isString(u)&&angular.isNumber(e)){var r=function e(u,t){return u<n[t=t||0].factor?n[t-1]?e(u,t-1):n[t]:n[t+1]&&u>=n[t+1].factor?e(u,t+1):n[t]}(e);return e=Number(Math.round(e*Math.pow(a,-r.e)+"e"+t)+"e-"+t),{length:s(e,u,t),unit:{abbr:i.translate(r.abbr,u),text:i.translate(r.text,u)}}}return{length:e,unit:null}}}(e.unitMap,e.unitStep)},t={0:{abbr:"B",text:"Bytes"},1:{abbr:"KB",text:"Kilobytes"},2:{abbr:"MB",text:"Megabytes"},3:{abbr:"GB",text:"Gigabytes"}};return e.toFilesize=new u({unitMap:t,unitStep:1024}),(t={})[-1]={abbr:"mm",text:"millimetres"},t[0]={abbr:"m",text:"metres"},t[1]={abbr:"km",text:"kilometres"},e.toDistance=new u({unitMap:t,unitStep:1e3}),e.paginate=function(e){for(var u,t=Math.ceil(this.length/e),r=[],n=1;n<t;n++)u=(n-1)*e,r.push({idx:n,size:e,fromIdx:u,toIdx:u+e});return 0<t&&(u=(n-1)*e,e=this.length%e==0?e+0:this.length%e,r.push({idx:n,size:e,fromIdx:u,toIdx:u+e})),r},e.min=function(e,u){return angular.isNumber(e)&&angular.isNumber(u)?Math.min(e,u):e},e.stringToFloat=function(e,u){e="fr"===(u=u||"en")?e.replace(/(\d)([ |\u00A0])(\d{2})/g,"$1$3").replace(/(\d),(\d)/,"$1.$2"):e.replace(/,/g,"");var t=/^\D*\(\d+(\.\d+)?\)/.test(e);e=e.replace(/^[^\d|-]+/,"");var r=parseFloat(e);return t&&(r=-r),r},e}]).factory("colourService",[function(){var e={},u={white:"ffffff",black:"000000",yellow:"ffc300",orange:"f2671f",red:"c91b26",magenta:"9c0f5f",purple:"60047a",blue:"0087cb",green:"008b52","light-blue":"D1DDEB"};return e.getHex=function(e){return e?(void 0!==u[e]&&(e=u[e]),e=e.replace(/^#/,""),/^[0-9a-f]{3}$/i.test(e)?e[0]+e[0]+e[1]+e[1]+e[2]+e[2]:/^[0-9a-f]{6}$/i.test(e)?e:null):null},e.contrastColour=function(e){return e&&140<=(299*parseInt(e.substr(0,2),16)+587*parseInt(e.substr(2,2),16)+114*parseInt(e.substr(4,2),16))/1e3?"black":"white"},e.distinctColour=function(e){var u=["3cb44b","0082c8","f58231","911eb4","ffe119","e6194b","46f0f0","f032e6","d2f53c","fabebe","008080","e6beff","aa6e28","800000","808000","ffd8b1","000080","808080"];return u[(e=Math.max(parseInt(e||0),0))%u.length]},e}]).factory("htmlParsingService",[function(){var r={elementToObject:function(e){for(var u={html:e.innerHTML,text:e.textContent.trim(),classes:[]},t=0;t<e.classList.length;t++)u.classes.push(e.classList.item(t));for(var r=0;r<e.attributes.length;r++){var n=e.attributes[r].name;"class"!==n&&(u[n]=e.getAttribute(n))}return u},elementsToArray:function(e){for(var u=[],t=0;t<e.length;t++)u.push(r.elementToObject(e[t])),u[u.length-1].index=t;return u}};return r}]).factory("languageService",["translationConfig","lazyloadFiles","lazyloaderFactory","env","$translate","$q","$log",function(n,t,r,a,i,s,l){var o={},c=function(e){var u="en";for(var t in n.languageOption)if(n.languageOption[t].regexp.test(e)){u=t;break}return u};o.normalizeLanguage=c;var f=function(e){var u="onesite.translations."+(e=c(e));return r.load(r.instantiate("module",u),{name:u,files:t[u]},function(){return"en"!==e})};o.lazyloadTranslations=f;var g,e=(g=c(navigator.language||navigator.userLanguage||"en"),{get:function(){return g},set:function(e){e=c(e);var u=s.defer();return angular.isString(e)&&n.languageOption[e]?f(e).then(function(){i.use(e),g=e,u.resolve(g)},function(){u.reject(g)}):u.reject(g),u.promise}});o.currentLanguage=e;var E=function(e,u){var t,r;angular.isString(u)&&"en"!==u&&l.warn((t=e,r=u,["missing translation in",n.languageOption[r].title,"for:",t].join(" ")))};return o.reportMissingTranslation=E,o.translate2=function(e,u){var t;return n.content[u]&&n.content[u][e]?t=n.content[u][e]:"develop"!==a&&"stage"!==a||E(e,u),t},o.translate=function(e,u){return o.translate2(e,u)||e},o.alternativeLanguage=function(e){return{lang:e=n.languageOption[e].alternate,title:n.languageOption[e].title}},o}]).factory("listService",["$parse",function(i){var e={unique:function(u){var t,r=[],n={};return angular.isString(u)?angular.forEach(this,function(e){t=i(u)(e),angular.isString(t)&&!n[t]&&(n[t]=!0,r.push(e))}):angular.forEach(this,function(e){angular.isString(e)&&!n[e]&&(n[e]=!0,r.push(e))}),r},typeahead:function(u){var t,r=[],n={},a={};return angular.isString(u)&&angular.forEach(this,function(e){t=i(u)(e),!angular.isString(t)||n[t]||e.title in a||(n[t]=!0,r.push(e),a[e.title.replace(/<[^>]+>/gm,"")]=e.index)}),r},slice:function(e,u,t){return angular.isArray(e)?t?e.slice(+u,+t):e.slice(+u):[]},pick:function(e,u){return angular.isArray(e)&&angular.isNumber(u)?e.slice(+u,+u+1):[]},toMatrix:function(e){var n=Math.ceil((angular.isArray(this)?this.length:0)/e),a=[];return this.map(function(e,u){var t=Math.floor(u/n),r=u%n;a[t]||(a[t]=[]),a[t][r]=e}),a},insert:function(t){angular.isArray(this)&&t&&this.splice(1).reduce(function(e,u){return e.push(t),e.push(u),e},this)}};return e}]).factory("scrollService",["$window","$q","$timeout","$document","$location","$anchorScroll",function(u,t,r,n,a,i){var s={},l=!1;s.isWindowHeightPassed=!1;var o=function(){var e=u.scrollY||document.documentElement.scrollTop+angular.element("body")[0].offsetHeight-u.innerHeight;s.isWindowHeightPassed=e>u.innerHeight};return s.calcIsWindowHeightPassed=o,s.scrollToId=function(e){var u=e||a.hash();return angular.isString(u)&&""!==u.trim()&&angular.element("#"+u)&&(a.hash(u),i()),null},s.scrollToTop=function(e){var u=n.scrollTop(0,e||500);return u.then(function(){s.calcIsWindowHeightPassed(),angular.element("p.show-for-sr").focus()}),u},s.scrollToY=function(e,u){n.scrollTo(0,u,e||500)},s.elementScrollToElement=function(e,u,t){return e[0]&&u[0]?angular.element(e).scrollTo(u,0,t||500):null},s.scrollToElement=function(e,u,t){return e[0]?n.scrollTo(e,u||0,t||500):null},o(),angular.element(u).bind("scroll",function(){if(!l){l=!0,o();var e=t.defer();r(function(){e.resolve()},10,!1),e.promise.then(function(){l=!1})}}),s}]).factory("browserStorageService",["localStorageService","$q",function(n,a){var e={};return e.Handler=function(e){return r=e.id,function(e){return e?(u=e,t=a.defer(),n.add(r,u)?t.resolve():t.reject(),t.promise):n.get(r)||{};var u,t};var r},e}]).factory("remoteStorageService",["$http","$q","$cookies","sessionService","apiEndpointConfig","stringService",function(c,f,e,g,E,d){var u={};return u.Handler=function(e){var u,o,t;return u=e.endPoint,o=[E["onesite.app"].remoteStorageService,u].join(""),t=function(e){var u,t,r,n=f.defer(),a=["",e.id].join("/"),i=[d.getFullDomain(),o,a].join(""),s=[(u=i,t=f.defer(),c.head(u).success(function(){t.resolve()}).error(function(){t.reject()}),t.promise)],l=g.get();return l.then(function(e){r=e}),s.push(l),f.all(s).then(function(){(function(e,u,t){var r=f.defer();if(u&&angular.isString(u.id)){var n=t.id?"PUT":"POST";t.sessionId=u.id,c({url:e,method:n,timeout:E["onesite.app"].timeout,data:t}).success(function(e){e.data=t,r.resolve(e)}).error(function(){r.reject()})}else r.reject();return r.promise})(i,r,e).then(function(e){n.resolve(e)},function(){n.reject()})},function(){n.reject()}),n.promise},function(e){return angular.isObject(e)?t(e):((u=f.defer()).reject(),u.promise);var u}},u}]).factory("sessionService",["browserStorageService","stringService","$q",function(e,t,r){var u={},n=new e.Handler({id:"session"}),a=!1;return u.get=function(){var u=r.defer(),e=n();e.id?u.resolve(e):function(){var e=r.defer();a&&e.resolve(null),a=!0;var u={id:t.getUuid()};return n(u).then(function(){e.resolve(u),a=!1},function(){e.resolve(null),a=!1}),e.promise}().then(function(e){u.resolve(e)},function(){u.resolve(null)});return u.promise},u}]).factory("dataBindingService",["getterFactory",function(t){var e={},n=function(t,e){var r={};return angular.forEach(e,function(e,u){r[u]=e(t)}),r};e.bindData=n,e.bindDataList=function(e,u,t){var r=[];return angular.forEach(angular.isFunction(u)?u(e):e,function(e){r.push(n(e,t))}),r};var u,a,i=(a={string:function(e,u){return t.instantiate(e+"."+u)},function:function(u,t){return function(e){return t(e,u)}},undefined:u=function(e){return t.instantiate(e)},object:u},function(e,u){for(var t in u)if(u.hasOwnProperty(t)){var r=u[t];this[t]=a[void 0===r?"undefined":_typeof(r)](e,r)}});return e.scaffoldGetter=function(e){var t={},r=[];return angular.forEach(e,function(e,u){i.call(t,u,e),r.push(u.split(".")[0])}),{getter:t,fieldList:r}},e}]).factory("lazyloaderService",["$ocLazyLoad",function(t){var e={jsonp:function(e){return{isSuccessful:!0,promise:t.load([{files:angular.isArray(e)?e:[e],cache:!1}])}},runScript:function(e){return{isSuccessful:!0,promise:t.load(e)}},executeFunction:function(e){return e(),{isSuccessful:!0,promise:null}},addModule:function(e,u){return{isSuccessful:!0,promise:!angular.isFunction(u)||u()?t.load(e):null}}};return e}]).factory("debounceService",["$q","$timeout",function(n,a){var e={};return e.SoftDebouncer=function(e){var u,r=function(){return this.inputBuffer[0]&&!angular.equals(this.inputBuffer,this.input)},t=function(e){var u=this;u.isLocked?(u.inputBuffer=e,u.isLockedButAlreadyResolved&&(u.isLockedButAlreadyResolved=!1,u.defer=n.defer())):(u.isLocked=!0,u.inputBuffer=e,u.defer=n.defer(),function u(e){var t=this;t.input=e,t.method.apply(null,e).then(function(e){r.call(t)?a(function(){u.call(t,t.inputBuffer)},t.delay):(t.isLockedButAlreadyResolved=!0,t.defer.resolve(t.success(e)),a(function(){r.call(t)?u.call(t,t.inputBuffer):(t.isLockedButAlreadyResolved=!1,t.isLocked=!1)},t.delay))},function(){t.defer.reject()})}.call(u,e))};return u={delay:e.delay,method:e.submitMethod,success:e.onSuccess,inputBuffer:[],defer:null},function(){return t.call(u,arguments),u.defer.promise}},e}]).factory("callbackService",["$parse","lazyloaderFactory",function(t,a){var e={callback:function(u){if(u.hasOwnProperty("callback")&&angular.isFunction(t("callback.handler")(u))){var e=u.callback.handler.apply(null,Array.prototype.slice.call(arguments,1));angular.isObject(e)&&angular.isFunction(e.then)&&e.then(function(e){angular.isFunction(t("callback.onSuccess")(u))&&u.callback.onSuccess(e)},function(){angular.isFunction(t("callback.onError")(u))&&u.callback.onError()})}},setupGoogleMapApiCallback:function(){var t,r,n;angular.isFunction(window.loadGoogleMapApi)||(window.loadGoogleMapApi=function(e,u){r||(!t&&e?(t=e,n=angular.isString(u)||angular.isArray(u)?u:null):t&&!e&&(r=!0,n?a.load(a.instantiate("jsonp"),n).then(function(){t.resolve()},function(){t.resolve()}):t.resolve()));return r})}};return e}]);
/*
     FILE ARCHIVED ON 13:06:06 Mar 16, 2020 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 21:31:54 Mar 20, 2020.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  esindex: 0.016
  exclusion.robots.policy: 0.204
  LoadShardBlock: 205.418 (4)
  captures_list: 1071.284
  exclusion.robots: 0.219
  CDXLines.iter: 67.547 (4)
  PetaboxLoader3.datanode: 242.74 (6)
  RedisCDXSource: 25.061
  PetaboxLoader3.resolve: 27.015
  load_resource: 70.721
*/