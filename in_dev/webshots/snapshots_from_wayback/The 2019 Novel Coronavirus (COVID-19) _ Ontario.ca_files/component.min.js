"use strict";angular.module("onesite.component",["onesite.component.factories","onesite.component.directives","onesite.component.services"]).provider("defaultMinisterFooter",[function(){var e={en:{id:"45118",ministerQuote:"<p>The Government of Ontario includes ministries, agencies and Crown corporations.</p>",photo:{uri:"//web.archive.org/web/20200215135818/https://files.ontario.ca/trillium_13.jpg"},displayName:"Government of Ontario",ministry:"Cabinet Office"},fr:{id:"45119",ministerQuote:"<p>Le gouvernement de l’Ontario inclut les ministères, organismes et sociétés de la Couronne.</p>",photo:{uri:"//web.archive.org/web/20200215135818/https://files.ontario.ca/trillium_13.jpg"},displayName:"Gouvernement de l'Ontario",ministry:"Bureau du Conseil des ministres"}};this.$get=function(){return e}}]).provider("defaultContact",[function(){var e={en:{id:"7474",twitter:"https://web.archive.org/web/20200215135818/https://twitter.com/ongov",youtube:"https://web.archive.org/web/20200215135818/https://www.youtube.com/ONgov",facebook:"https://web.archive.org/web/20200215135818/https://www.facebook.com/ONgov"},fr:{id:"8211",twitter:"https://web.archive.org/web/20200215135818/https://twitter.com/ongouv",youtube:"https://web.archive.org/web/20200215135818/https://www.youtube.com/ONgov",facebook:"https://web.archive.org/web/20200215135818/https://www.facebook.com/ONgouv"}};this.$get=function(){return e}}]).provider("defaultTaxonomy",[function(){var e={3:[{language:"fr",field_global_topic:{und:[{value:1}]},name:"Affaires et économie",field_landing_page_link:{und:[{url:"fr/page/affaires-et-economie"}]}},{language:"fr",field_global_topic:{und:[{value:1}]},name:"Arts et culture",field_landing_page_link:{und:[{url:"fr/page/arts-et-culture"}]}},{language:"fr",field_global_topic:{und:[{value:1}]},name:"Conduite et routes",field_landing_page_link:{und:[{url:"fr/page/conduite-et-routes"}]}},{language:"fr",field_global_topic:{und:[{value:1}]},name:"Domicile et communauté",field_landing_page_link:{und:[{url:"fr/page/domicile-et-communaute"}]}},{language:"fr",field_global_topic:{und:[{value:1}]},name:"Éducation et formation",field_landing_page_link:{und:[{url:"fr/page/education-et-formation"}]}},{language:"fr",field_global_topic:{und:[{value:1}]},name:"Environnement et énergie",field_landing_page_link:{und:[{url:"fr/page/environnement-et-energie"}]}},{language:"fr",field_global_topic:{und:[{value:1}]},name:"Gouvernement",field_landing_page_link:{und:[{url:"fr/page/gouvernement"}]}},{language:"fr",field_global_topic:{und:[{value:1}]},name:"Impôts et avantages fiscaux",field_landing_page_link:{und:[{url:"fr/page/impots-et-avantages-fiscaux"}]}},{language:"fr",field_global_topic:{und:[{value:1}]},name:"Lois et sécurité",field_landing_page_link:{und:[{url:"fr/page/lois-et-securite"}]}},{language:"fr",field_global_topic:{und:[{value:1}]},name:"Régions rurales et du Nord",field_landing_page_link:{und:[{url:"fr/page/regions-rurales-et-du-nord"}]}},{language:"fr",field_global_topic:{und:[{value:1}]},name:"Santé et bien-être",field_landing_page_link:{und:[{url:"fr/page/les-soins-de-sante-en-ontario"}]}},{language:"fr",field_global_topic:{und:[{value:1}]},name:"Travail et emploi",field_landing_page_link:{und:[{url:"fr/page/travail-et-emploi"}]}},{language:"fr",field_global_topic:{und:[{value:1}]},name:"Voyage et loisirs",field_landing_page_link:{und:[{url:"fr/page/voyage-et-loisirs"}]}},{language:"en",field_global_topic:{und:[{value:1}]},name:"Arts and culture",field_landing_page_link:{und:[{url:"page/arts-and-culture"}]}},{language:"en",field_global_topic:{und:[{value:1}]},name:"Business and economy",field_landing_page_link:{und:[{url:"page/business-and-economy"}]}},{language:"en",field_global_topic:{und:[{value:1}]},name:"Driving and roads",field_landing_page_link:{und:[{url:"page/driving-and-roads"}]}},{language:"en",field_global_topic:{und:[{value:1}]},name:"Education and training",field_landing_page_link:{und:[{url:"page/education-and-training"}]}},{language:"en",field_global_topic:{und:[{value:1}]},name:"Environment and energy",field_landing_page_link:{und:[{url:"page/environment-and-energy"}]}},{language:"en",field_global_topic:{und:[{value:1}]},name:"Government",field_landing_page_link:{und:[{url:"page/government"}]}},{language:"en",field_global_topic:{und:[{value:1}]},name:"Health and wellness",field_landing_page_link:{und:[{url:"page/health-care-ontario"}]}},{language:"en",field_global_topic:{und:[{value:1}]},name:"Home and community",field_landing_page_link:{und:[{url:"page/home-and-community"}]}},{language:"en",field_global_topic:{und:[{value:1}]},name:"Jobs and employment",field_landing_page_link:{und:[{url:"page/jobs-and-employment"}]}},{language:"en",field_global_topic:{und:[{value:1}]},name:"Law and safety",field_landing_page_link:{und:[{url:"page/law-and-safety"}]}},{language:"en",field_global_topic:{und:[{value:1}]},name:"Rural and north",field_landing_page_link:{und:[{url:"page/rural-and-north"}]}},{language:"en",field_global_topic:{und:[{value:1}]},name:"Taxes and benefits",field_landing_page_link:{und:[{url:"page/taxes-and-benefits"}]}},{language:"en",field_global_topic:{und:[{value:1}]},name:"Travel and recreation",field_landing_page_link:{und:[{url:"page/travel-and-recreation"}]}}]};this.$get=function(){return e}}]).provider("cacheMachine",[function(){this.$get=["$rootScope",function(a){return a.cacheMachine={},{cache:function(e,n){a.cacheMachine[e]=n},cached:function(e){return a.cacheMachine[e]}}}]}]);
"use strict";angular.module("onesite.component.directives",[]).directive("onesiteHeader",["$filter","$timeout","languageService","routeService","redirectService",function(e,n,i,o,a){var l={en:"page/government-ontario",fr:"fr/page/gouvernement-de-lontario"};return{scope:{contentNode:"=",search:"=",update:"="},restrict:"E",replace:!0,transclude:!0,templateUrl:"/core_modules/component/partials/onesiteHeader.html",link:function(r,t){r.pathLogoHeader="/img/logo-ontario@2x.png",r.pathLogoPrint="/img/ontario@2x-print.png",o.regulateRedirect(t),r.altLang=i.alternativeLanguage(r.contentNode.lang),r.update.header=function(e){r.altLang=i.alternativeLanguage(e.lang),angular.isFunction(r.update.taxonomies)&&r.update.taxonomies(e.taxonomies),function(){var t=this;n(function(){t.click();var e=t.find("p.show-for-sr")[0];e&&angular.isFunction(e.focus)&&e.focus()},0,!1)}.call(t)},r.headerlogoAliasCollection=l,r.aliasToPath=a.aliasToPath,r.changeLangOnly=function(e,t,n){return function(e,t,n){var r=this;angular.isString(t)||(e.stopPropagation(),e.preventDefault(),i.currentLanguage.set(n).then(function(e){r.contentNode.lang=e,r.update.header({lang:e,taxonomies:r.contentNode.taxonomies})}))}.call(r,e,t,n)}}}}]).directive("onesiteHeaderLogo",["externalLinks","routeService",function(n,r){return{restrict:"EA",scope:!0,transclude:!0,template:"<div ng-transclude></div>",link:function(e,t){r.regulateRedirect(t),e.pathUrl=n.welcome}}}]).directive("onesiteBrowserMessage",[function(){return{restrict:"EA",scope:{language:"="},replace:!0,templateUrl:"/core_modules/component/partials/onesiteBrowserMessage.html",link:function(){}}}]).directive("onesiteIntro",["redirectService",function(r){var i={en:"page/serviceontario",fr:"fr/page/serviceontario"};return{scope:!1,restrict:"E",replace:!0,templateUrl:"/core_modules/component/partials/onesiteIntro.html",link:function(e,t,n){e.serviceontarioAliasCollection=i,e.aliasToPath=r.aliasToPath,e.noTopMargin="true"===n.noTopMargin}}}]).directive("onesiteBreadcrumb",[function(){return{scope:{breadcrumb:"="},restrict:"E",replace:!0,templateUrl:"/core_modules/component/partials/onesiteBreadcrumb.html",link:function(){}}}]).directive("onesiteBreadcrumbHome",[function(){return{scope:!1,restrict:"A",replace:!0,templateUrl:"/core_modules/component/partials/onesiteBreadcrumbHome.html",link:function(){}}}]).directive("onesiteArchive",["redirectService",function(r){return{scope:!1,restrict:"E",replace:!0,templateUrl:"/core_modules/component/partials/onesiteArchive.html",link:function(e,t,n){e.aliasToPath=r.aliasToPath,e.noTopMargin="true"===n.noTopMargin}}}]).directive("onesiteToc",["scrollService","listService","redirectService","onesiteFoundationService",function(t,e,n,r){return{restrict:"E",scope:{tocList:"=",includeFaq:"=",alias:"=",tocStyle:"="},template:'<div ng-include="getTocTemplate()"></div>',replace:!0,link:function(e){e.scrollService=t,e.onesiteFoundationService=r,e.SPLIT_THRESHOLD=5,e.path=n.aliasToPath(e.alias),e.getTocTemplate=function(){return"ul"===e.tocStyle?"/core_modules/component/partials/onesiteTocUnordered.html":"/core_modules/component/partials/onesiteToc.html"}}}}]).directive("onesiteNotices",["noticeLinks",function(t){var n=((new Date).getFullYear()+"").substr(2);return{scope:{language:"@",ministry:"@",copyRightOnly:"@"},restrict:"E",replace:!0,templateUrl:"/core_modules/component/partials/onesiteNotices.html",link:function(e){e.copyrightCurrentYear=n,e.noticeLinks=t}}}]).directive("onesiteContact",[function(){return{scope:!1,restrict:"E",replace:!0,templateUrl:"/core_modules/component/partials/onesiteContact.html"}}]).directive("onesiteContentDate",[function(){return{scope:{date:"@",language:"@",text:"@"},restrict:"E",templateUrl:"/core_modules/component/partials/onesiteContentDate.html",replace:!0}}]).directive("onesiteTaxonomies",["$filter","$timeout",function(n,r){function i(e){var t={isGlobal:!0,lang:this.lang};return angular.isArray(e)?n("filter")(e,t):null}return{scope:{lang:"@",taxonomies:"=",ministry:"@",templateUrl:"@",update:"="},restrict:"E",replace:!0,templateUrl:function(e,t){return angular.isString(t.templateUrl)&&""!==t.templateUrl.trim()?t.templateUrl:"/core_modules/component/partials/onesiteTaxonomies.html"},link:function(t){t.vocabularyList=i.call(t,t.taxonomies),angular.isObject(t.update)&&(t.update.taxonomies=function(e){r(function(){t.vocabularyList=i.call(t,e)})})}}}]).directive("onesiteAside",[function(){return{restrict:"E",scope:!1,templateUrl:"/core_modules/component/partials/onesiteAside.html",replace:!0}}]).directive("onesiteActionBar",[function(){return{restrict:"E",scope:!1,templateUrl:"/core_modules/component/partials/onesiteActionBar.html",replace:!0}}]).directive("onesiteFooter",[function(){return{restrict:"E",scope:!1,templateUrl:"/core_modules/component/partials/onesiteFooter.html",replace:!0}}]).directive("onesiteRef",[function(){return{restrict:"E",scope:{id:"@number"},templateUrl:"/core_modules/component/partials/onesiteRef.html",replace:!0}}]).directive("onesiteFootnotes",[function(){return{restrict:"E",scope:{footnoteList:"="},templateUrl:"/core_modules/component/partials/onesiteFootnotes.html",replace:!0}}]).directive("onesiteDownloadBtn",["numberService","languageService","stringService","analyticsEventService",function(t,n,r,i){return{scope:{file:"=",onesiteCategory:"@",onesiteAction:"@",onesiteLabel:"@"},restrict:"E",replace:!0,templateUrl:"/core_modules/component/partials/onesiteDownloadBtn.html",link:function(e){e.lang=n.currentLanguage.get(),e.file&&e.file.filesize&&(e.file.filesizeObj=t.toFilesize(parseInt(e.file.filesize),e.lang)),e.file&&e.file.filemime&&(e.fileMime=new r.FileMime({file:e.file.filemime})),e.onesiteCategory=e.onesiteCategory||"documents",e.onesiteAction=e.onesiteAction||i(),e.onesiteLabel=e.onesiteLabel||"download-button"}}}]).directive("onesitePhone",["languageService","phoneNumberService","$location",function(i,o,a){return{restrict:"E",transclude:!0,scope:{extension:"="},compile:function(e,n,r){return{pre:function(t){t.lang=i.currentLanguage.get(),t.icon="icon"in n,t.path=a.path();var e=[];"tollfree"in n?e.push("en"===t.lang?"toll-free":"sans frais"):"label"in n&&e.push("en"===t.lang?'<abbr title="telephone">tel</abbr>':'<abbr title="téléphone">tél.</abbr>'),"tty"in n&&e.push("en"===t.lang?'<abbr title="teletypewriter">TTY</abbr>':'<abbr title="pour un appareil de télécommunications pour sourds">ATS</abbr>'),e.length&&(e[0]=e[0].replace(/^(<[^>]+>)?(.)/,function(e,t,n){return(t||"")+n.toUpperCase()}),t.labels=e.join(" ")+("en"===t.lang?"":" ")+":"),r(t,function(e){t.tel=o.tel(e[0].textContent),t.number=o.display(e[0].textContent,t.lang)}),"911"===t.tel&&(t.emergecy=t.tel,delete t.number)}}},templateUrl:"/core_modules/component/partials/onesitePhone.html",replace:!0}}]).directive("onesiteFax",["languageService",function(i){return{restrict:"E",transclude:!0,scope:{},compile:function(e,t,r){return{pre:function(n){n.lang=i.currentLanguage.get(),n.label="label"in t,n.icon="icon"in t,r(n,function(e){var t="en"===n.lang?"$1-$2":"$1 $2";n.number=e[0].textContent.replace(/[^\d]/gi,"").replace(/(\d{3})(\d{4})$/,"$1-$2").replace(/(\d{3})(.{8})$/,t).replace(/^(1)(.{12})$/,t)})}}},templateUrl:"/core_modules/component/partials/onesiteFax.html",replace:!0}}]).directive("onesiteDatafile",["$http","$timeout","languageService","stringService",function(u,p,m,d){return{restrict:"A",transclude:!0,scope:!0,link:function(r,t,n,e,i){i(r,function(e){t.append(e),t.attr("aria-live","polite")});var a=n.name||"data";r[a+"_loaded"]=!1;var o=void 0!==t.attr("hide-until-"+a)?t:angular.element(t[0].querySelectorAll("[hide-until-"+a+"]"));o.addClass("hide");var l={en:"Loading…",fr:"Téléchargement…"}[m.currentLanguage.get()],c=angular.element('<span class="before-'+a+'">'+l+"</span>");0<angular.element(t[0].getElementsByClassName("before-"+a)).length||(o.length?angular.element(o[0]).before(c):t.prepend(c));function s(){"en"===m.currentLanguage.get()?c.text("There was a problem loading parts of this page. Please try again later."):c.text("Il y a eu un problème avec le téléchargement d’une partie de la page. Veuillez réessayer plus tard.")}!function(e){if(!/^(https?:)?\/\//i.test(e))return!0;var t=e.toLowerCase().replace(/^(https?:)?\/\//,"").replace(/\/.*$/,"").split("."),n=t.slice(t.length-2).join(".");return"ontario.ca"===n||"ontariogovernment.ca"===n||"on.ca"===n&&"gov"===t[t.length-3]}(n.onesiteDatafile)?s():u.get(n.onesiteDatafile).then(function(e){r[a]=function(e,t){var i;if(t.format&&"csv"===t.format.toLowerCase()||t.delimiter||t.hasHeader||t.headers||"transpose"in t||/\.csv/i.test(t.onesiteDatafile)){var o,n=d.csv(e.data,t.delimiter);"transpose"in t&&(n=n[0].map(function(e,t){return n.map(function(e){return e[t]})})),t.hasHeader&&"false"===t.hasHeader.toLowerCase()||(o=n.shift(),t.headers&&t.headers.split(", ").forEach(function(e,t){o[t]=e})),o?(r[a+"_headers"]=o,i=[],n.forEach(function(n){var r={};o.forEach(function(e,t){r[e]=n[t]}),i.push(r)})):i=n}else i=e.data;return i}(e,n),o.removeClass("hide"),c.remove(),p(function(){t.find("h2").length&&r.$emit("h2s_loaded"),r[a+"_loaded"]=!0})},function(e){s(),ga("send","event","error-"+e.status,"onesite-datafile",n.onesiteDatafile)})}}}]).directive("bulletColour",["colourService",function(i){return{restrict:"A",link:function(e,t,n){var r=i.getHex(n.bulletColour);t.before('<style>ol[bullet-colour="'+n.bulletColour+'"] li:before{background-color:#'+r+" !important}</style>"),"black"===i.contrastColour(r)&&t.addClass("light-bullets")}}}]).directive("smarties",["$compile",function(i){return{restrict:"C",replace:!0,transclude:!0,link:function(r,e){e.children().each(function(e,t){var n=angular.element(t);n.attr("smartie",""),n=i(n)(r)})},templateUrl:"/core_modules/component/partials/onesiteSmartieWrapper.html"}}]).directive("smartie",["colourService",function(o){return{restrict:"A",replace:!0,transclude:!0,scope:{},templateUrl:"/core_modules/component/partials/onesiteSmartie.html",link:function(i,e,t,n,r){r(i,function(e){var t="";e.each(function(){t+=this.outerHTML||""}),(t=angular.element("<div>"+t+"</div>")).children().first().remove(),i.caption=t.html();var n=e.filter("*")[0];i.number=n.outerHTML,i.bigNumber=4<angular.element(i.number).text().length,i.styles={};var r=o.getHex(angular.element(n).attr("colour"));"0087cb"!==r&&(i.styles["background-color"]="#"+r),"black"===o.contrastColour(r)&&(i.styles.color="#000000")})}}}]).directive("onesiteTimeline",["$compile","timelineDataService","languageService",function(r,t,i){return{restrict:"C",replace:!0,transclude:!0,scope:{colour:"@",filters:"@"},link:function(n,e){e.find("dt").each(function(e,t){(t=angular.element(t)).attr("timeline-block",""),t=r(t)(n)}),n.data=t,n.language=i.currentLanguage.get()},template:'<onesite-timeline><timeline-filter ng-if="filters" filters="{{filters}}"></timeline-filter><div class="timeline timeline-container" ng-transclude></div></onesite-timeline>'}}]).directive("timelineFilter",["timelineFilterService","timelineDataService",function(t,n){return{restrict:"E",replace:!0,transclude:!0,templateUrl:"/core_modules/component/partials/onesiteTimelineFilter.html",scope:{filters:"@"},link:function(e){e.timelineFilterService=t,e.$parent.filters=e.filters,e.language=e.$parent.language,e.data=n,e.keyword="",e.data.categories=t.categoriesStringToArray(e.filters)}}}]).directive("timelineBlock",["timelineDataService","timelineFilterService","$sce","$sanitize",function(i,o,a,l){return{restrict:"A",replace:!0,transclude:!0,templateUrl:"/core_modules/component/partials/onesiteTimelineBlock.html",scope:{timelineBlock:"=",category:"@"},link:function(e,t,n){for(e.colour=e.$parent.colour,e.category=n.category,e.filters=e.$parent.filters,e.categoryColours=["po-yellow","po-light-blue","po-teal","po-green","po-purple","po-dark-blue","po-taupe","po-dark-yellow","po-light-green","po-rich-black","po-orange","po-red","po-magenta"],e.timelineFilterService=o,e.dt="",e.plainContent="",e.data=i,e.playVideo=function(e){var t=e.target.parentNode.parentNode.parentNode.getElementsByClassName("youtube-player");if(1===t.length){var n=t[0].getAttribute("data-id"),r=document.createElement("iframe"),i="https://web.archive.org/web/20200215135818/https://www.youtube.com/embed/"+n+"?autoplay=1";r.setAttribute("src",i),r.setAttribute("frameborder","0"),r.setAttribute("allowfullscreen","1"),t[0].replaceWith(r)}};"DD"===t.next().prop("tagName");){e.dt=t.text(),e.plainContent+=l(t.next().html());var r=t.next().attr("youtube");r&&(e.plainContent+='<div class="flex-video"><div class="youtube-player" data-id="'+r.replace(/[^a-zA-Z0-9-_]+/g,"")+'"><div data-id="'+r+'"><img src="https://web.archive.org/web/20200215135818/https://i.ytimg.com/vi/'+r+'/hqdefault.jpg" /><div class="play"><p class="show-for-sr"><a href="https://web.archive.org/web/20200215135818/https://www.youtube.com/watch?v='+r+'">play video</a></p></div></div></div></div>'),t.next().remove()}e.content=a.trustAsHtml(e.plainContent)}}}]).directive("onesiteBarGraph",["$timeout","languageService","graphService",function(r,i,l){function o(e){var t=l.tableToHeaders(e.tableElement,e.column);e.columns=t.numeric,e.rows=l.tableToRows(e.tableElement,t,e.lang);var n=function(e,t){if(1===e)return{type:"simple"};if("grouped"===t)return{type:"grouped"};var n={type:"stacked"};return"stacked-100"===t&&(n.subtype="100%"),n}(t.numeric.length,e.inputType);e.type=n.type;var r=e.colourOffset+t.numeric[0].graph_index,i=l.colourize(e.rows,t,e.type,r);e.rows=i.rows,e.legend=i.legend;var o=l.calculateBarWidths(e.rows,n);e.rows=o.rows,e.mixed=o.mixed;var a=function(e){var t=0;return e.forEach(function(e){t=Math.max(t,e.text.length)}),t}("grouped"===e.type?t.numeric:e.rows);e.labelWidth=Math.min(a,40)/1.65}return{restrict:"E",replace:!0,scope:{table:"@",inputType:"@type",column:"@",watchFor:"@"},templateUrl:"/core_modules/component/partials/onesiteBarGraph.html",link:function(n,e,t){n.lang=i.currentLanguage.get(),n.tableElement=document.getElementById(n.table),n.id="t"+(new Date).getTime(),n.tableElement.setAttribute("tabindex","-1"),n.colourOffset="differentColour"in t?document.getElementsByClassName("bar-graph").length-1:0,n.watchFor?n.$watch("watchFor",function(){n.watchFor&&r(function(){o(n)})}):o(n),n.$watch("inputType",function(e,t){e!==t&&o(n)})}}}]);
"use strict";angular.module("onesite.component.factories",[]).factory("componentFactory",["componentService","componentDaoService","listService",function(i,e,n){function c(t){return e[t].getter}var r={};r.getGetter=c,r.getField=function(t){return e[t].fieldList},r.aggregateFields=function(t){var e=angular.isArray(t)?t.reduce(function(t,e){return t.concat(r.getField(e))},[]):[];return e[0]?n.unique.call(e).join(","):""};function a(t,e,n,r){return i[t].call(this,e,n,r,c(t))}return r.instantiate=a,r.batchInstantiate=function(t,r,i,c){var u=this;return t.reduce(function(t,e){var n=a.call(u,e,r,i,c);return n&&t.push(n),t},[])},r}]);
"use strict";angular.module("onesite.component.services",["onesite.config"]).factory("componentDaoService",["dataBindingService","getterFactory","urlConfig","scopeService","listService","stringService","$interpolate","$parse","$location",function(a,l,n,e,i,o,r,t,u){var c={};c.coreComponent=a.scaffoldGetter({nid:{id:null},type:{type:null},title:{title:null},language:{lang:null},published_at:{datePublished:function(t,e){var n=l.instantiate(e)(t);return angular.isString(n)&&""!==n.trim()&&(n=parseInt(n)),angular.isNumber(n)?1e3*n:null}},private:{isPrivate:function(t){var e=l.instantiate("private")(t);return angular.isNumber(e)?1===e:angular.isString(e)&&"1"===e.trim()}}}),c.intro=a.scaffoldGetter({"field_intro.und[0]":{intro:"safe_value"}}),c.archive=a.scaffoldGetter({"field_archive_reason.und[0]":{archive:"safe_value"},"field_archive_link.und[0]":{attributes:"attributes",title:"title",url:"url"}}),c.greyBox=a.scaffoldGetter({"field_greybox.und[0]":{greyBox:"safe_value"}});var s={content:r("{{ field_body_beta.und[0].safe_value || body.und[0].safe_value }}")};c.body=a.scaffoldGetter({nid:{getter:function(){return s},fields:function(){return"nid,field_body_beta,body"},fetchParams:function(t){return t.fetchParams}}});var d={title:l.instantiate("title"),section:function(t){var e,n,a=l.instantiate("id")(t);if(angular.isString(a)){var i=a.match(/(.*?)(\d+)/);e=angular.isString(i[1])&&""!==i[1].trim()?i[1]:null,n=angular.isString(i[2])&&""!==i[2].trim()?parseInt(i[2]):null}return{id:a,prefix:e,index:n}}};c.toc=a.scaffoldGetter({toc:{toc:function(t,e){return a.bindDataList(t,l.instantiate(e),d)}},"field_show_table_of_contents2.und[0]":{enabled2:function(t,e){var n=l.instantiate(e+".value")(t);return n}},"field_internal_tags.und":{hasFaq:function(t,e){return angular.isObject(l.instantiate(e+"[0]")(t))}},language:{lang:null}}),c.ministerFooter=a.scaffoldGetter({"field_minister_block.und[0].entity":{id:"nid",title:"title",ministerTitle:"field_minister_title.und[0].value",ministerQuote:"field_minister_quote.und[0].safe_value",photo:"field_minister_photo.und[0]",rectangularCrop:function(t,e){var n=l.instantiate(e+".field_rectangular_crop.und[0].value")(t);return"1"===n||1===n},ministerExternalLink:"field_minister_external_link.und[0].url",displayName:"field_display_name.und[0].value"},"field_ministries.und[0].taxonomy_term":{ministry:"name"}}),c.contact=a.scaffoldGetter({"field_contact.und[0].entity":{id:"nid",title:"title",facebook:"field_facebook_link.und[0].value",twitter:"field_twitter_link.und[0].value",youtube:"field_youtube_link.und[0].value"},language:{lang:null},nid:{nid:null}}),c.header=a.scaffoldGetter({"field_ministries.und[0]":{id:"tid"},type:{type:null}}),c.language=a.scaffoldGetter({language:{lang:null},translations:{translations:null},type:{type:null}}),c.dateChanged=a.scaffoldGetter({changed:{dateChanged:function(t,e){var n=l.instantiate(e)(t);return angular.isString(n)&&""!==n.trim()&&(n=parseInt(n)),angular.isNumber(n)?1e3*n:null}}}),c.landRegistration=a.scaffoldGetter({"field_lro_pdf.und[0]":{file:null}});var f={fileMime:function(t){return new o.FileMime({file:t.name})}},g={name:l.instantiate("taxonomy_term.name")},m=g,p={title:l.instantiate("description"),url:l.instantiate("uri")},v={title:l.instantiate("title"),url:l.instantiate("url")},h=[{label:"Open",value:30,title:"open"},{label:"To be opened",value:20,title:"upcoming"},{label:"Under review",value:10,title:"review"},{label:"Restricted",value:0,title:"closed"}].reduce(function(t,e){return t[e.value]=e.label,t[e.title]=e.label,t},{});c.datasetStatusMap=h;c.datasetExemptionMap={privacy:"Privacy",security:"Security",confidentiality:"Confidentiality",legal:"Legal and contractual obligations",commercial:"Commercial sensitivity"},c.dataset=a.scaffoldGetter({"field_odr_file_type.und":{fileTypeList:function(t,e){return a.bindDataList(t,l.instantiate(e),f)}},"field_category.und":{topicList:function(t,e){return a.bindDataList(t,l.instantiate(e),g)}},"field_ministries.und":{publisherList:function(t,e){return a.bindDataList(t,l.instantiate(e),m)}},"field_od_update_frequency.und[0].value":{updateFrequency:null},"field_od_geographical_coverage.und[0].value":{geographicalCoverage:null},"field_intellectual_property_url.und[0]":{license:null},"field_odr_file.und":{internalFileList:function(t,e){return a.bindDataList(t,l.instantiate(e),p)}},"field_od_external_file_link.und":{externalFileList:function(t,e){return a.bindDataList(t,l.instantiate(e),v)}},"field_od_technical_documentation.und[0]":{technicalDocument:null},"field_od_time_period_start.und[0]":{dateStart:function(t,e){var n;return l.instantiate(e+".unix")(t)?(n=l.instantiate(e+".unix")(t),angular.isNumber(n)?1e3*n:null):(n=l.instantiate(e+".value")(t),angular.isString(n)&&""!==n.trim()&&(n=new Date(n).getTime()),angular.isNumber(n)?n:null)}},"field_od_time_period_end.und[0]":{dateEnd:function(t,e){var n;return l.instantiate(e+".unix")(t)?(n=l.instantiate(e+".unix")(t),angular.isNumber(n)?1e3*n:null):(n=l.instantiate(e+".value")(t),angular.isString(n)&&""!==n.trim()&&(n=new Date(n).getTime()),angular.isNumber(n)?n:null)}},"field_current_date.und[0]":{useCurrentAsEndDate:function(t,e){var n=l.instantiate(e+".value")(t);return angular.isNumber(n)&&(n=n.toString()),angular.isString(n)&&"1"===n.trim()}},"field_data_updated_date.und[0]":{dateDataUpdated:function(t,e){var n=l.instantiate(e+".value")(t);return angular.isString(n)&&""!==n.trim()&&(n=parseInt(n)),angular.isNumber(n)?1e3*n:null}},"field_dataset_status.und[0]":{status:function(t,e){var n=l.instantiate(e+".value")(t);return n?c.datasetStatusMap[n]:null}},"field_dataset_exemption.und":{exemptionList:function(t,e){var n=l.instantiate(e)(t);return n?n.map(function(t){return c.datasetExemptionMap[t.value]}):null}},"field_exemption_rationale.und[0].value":{exemptionRationale:null},"field_external_data_link.und":{externalDataLink:null}});function _(t){return angular.isString(t)?o.strToDate(t.split(" ")[0]):null}c.tradeCalendar=a.scaffoldGetter({"field_trade_sector.und[0]":{sector:"taxonomy_term.name"},"field_trade_sector_other.und[0].value":{sectorOther:null},"field_trade_region.und[0]":{region:"taxonomy_term.name"},"field_trade_event_location.und[0].value":{eventLocation:null},"field_trade_event_date.und[0]":{fromDate:function(t,e){return _(l.instantiate(e+".value")(t))},toDate:function(t,e){return _(l.instantiate(e+".value2")(t))}},"field_trade_contact.und[0].value":{contactName:null},"field_trade_job_title.und[0].value":{contactTitle:null},"field_trade_contact_position.und[0].value":{contactPosition:null},"field_e_mail.und[0].value":{contactEmail:null},"field_telephone.und[0].value":{contactTelephone:null},changed:{lastChanged:function(t,e){var n=l.instantiate(e)(t);return n?n+"000":null}}}),c.orderInCouncil=a.scaffoldGetter({"field_oic_number.und[0].value":{oicNumber:null},"field_oic_acts.und":{oicActs:function(t,e){var n=l.instantiate(e)(t);return n?n.map(function(t){return t.taxonomy_term.name}):null}},"field_oic_ministry_signing.und[0]":{ministrySigning:"taxonomy_term.name"},"field_oic_date.und[0].value":{oicDate:function(t,e){var n=l.instantiate(e)(t);return n?n+"000":null}},"field_oic_amended_by.und[0]":{oicAmendedBy:"entity"},"field_oic_revoked_by.und[0]":{oicRevokedBy:"entity"}}),c.right=a.scaffoldGetter({"field_right.und[0]":{right:function(t,e){var n=r("{{ "+e+".safe_value || "+e+".value }}")(t);return angular.isString(n)&&""!==n.trim()?n:null}}});var b={name:l.instantiate("taxonomy_term.name"),landingPageLink:l.instantiate("taxonomy_term.field_landing_page_link")};c.getterTag=b,c.tags=a.scaffoldGetter({language:{lang:null},"field_category.und":{tagList:null}}),c.breadcrumbs={},c.contactUs=a.scaffoldGetter({language:{lang:null,contentNodeId:function(t){return l.instantiate("node.content.id")(e.getMainController())||("contact_us"===t.type?u.$$search.nid:null)},contactId:function(t){return l.instantiate("node.contact.id")(e.getMainController())||("contact_us"===t.type?u.$$search.id:null)},fields:function(){var t=["coreComponent","contact","ministerFooter","book"].reduce(function(t,e){return t.concat(c[e].fieldList)},[]);return i.unique.call(t).join(",")},fetchParams:function(){return{useRelativeUrl:!1,withCredentials:!1}}},"field_contact.und[0].entity":{telephone:"field_telephone.und[0].value",mailingAddress:"field_mailing_address.und[0].value",noticeOfCollection:"field_notice_of_collection.und[0].value",body:"body.und[0].value",id:"nid"}}),c.ministry=a.scaffoldGetter({"field_ministries.und[0].taxonomy_term":{ministry:"name"}});var y={name:l.instantiate("name"),lang:l.instantiate("language"),url:function(t){var e=l.instantiate("field_landing_page_link.und[0].url")(t);return[n.pathPrefix,e].join("/")},isGlobal:function(t){var e=l.instantiate("field_global_topic.und[0].value")(t);return"1"===e||1===e}},S={taxonomyList:function(t){return a.bindDataList(t,null,y)}};c.taxonomy=a.scaffoldGetter({"field_category.und[0].taxonomy_term":{idTxt:"vid",id:function(t,e){var n=l.instantiate(e+".vid")(t);return angular.isString(n)&&""!==n.trim()&&(n=parseInt(n)),angular.isNumber(n)?n:null},getterTaxonomies:function(){return S}}});function w(){angular.isFunction(t("DV.Schema.helpers.renderSpecificPageCss")(window))&&(window.DV.Schema.helpers.renderSpecificPageCss=function(){for(var t=[],e=1,n=this.models.document.totalPages;e<=n;e++)t.push(".DV-page-"+e+" .DV-pageSpecific-"+e);var a='<style class="document-viewer-page-css" type="text/css" media="all">\n'+(t.join(", ")+" { display: block; }")+"\n</style>";window.DV.jQuery("head").append(a)}),angular.isFunction(t("DV.Schema.events.drawPageAt")(window))&&(window.DV.Schema.events.drawPageAt=function(t,e){if(t){var n=0===e,a=e===this.models.document.totalPages-1;n&&(e+=1);var i=[{label:t[0],index:e-1},{label:t[1],index:e},{label:t[2],index:e+1}];a&&i.pop(),i[n?0:i.length-1].currentPage=!0,this.viewer.pageSet.draw(i)}})}c.documentEmbedded=a.scaffoldGetter({nid:{id:null},"field_document_embed.und[0]":{fileScript:function(t,e){var n=l.instantiate(e+".value")(t);n=angular.isString(n)&&""!==n.trim()?n.replace(/(\r\n|\n|\r)/gm,"").replace(/(.*<.*script.*)(.*?src.*?".*?viewer\/loader.js.*?")(.*)/,"$1$3"):null;var a=n?n.match(/(.*<.*script.*>.*DV.load.*\(.*['"])(.*.js)(.*['"].*?,)(.*?{.*}).*/):null;return n?{content:n,urlJs:a?a[2]:null,dvParams:a?a[4]:null}:{}},documentViewer:function(){return{handler:w,urlJs:"https://web.archive.org/web/20200215135818/https://docs.ontario.ca/viewer/viewer.js",css:'<link rel="stylesheet" type="text/css" media="screen" href="https://web.archive.org/web/20200215135818/https://docs.ontario.ca/viewer/viewer-datauri.css">',cssPrint:'<link rel="stylesheet" type="text/css" media="print" href="https://web.archive.org/web/20200215135818/https://docs.ontario.ca/viewer/printviewer.css">'}}},"field_first_published.und[0]":{datePublished:function(t,e){var n=l.instantiate(e+".value")(t);return angular.isString(n)&&""!==n.trim()?new Date(n).getTime():null}},fileSize:{fileSize:function(t,e){var n=l.instantiate(e)(t);return"number"==typeof n&&0<n?n:null},getterDocInfo:function(){return{pages:l.instantiate("pages"),resources:l.instantiate("resources")}}}}),c.analytics=a.scaffoldGetter({"field_ministries.und[0].taxonomy_term":{ministry:"name",doNotTrack:function(){return navigator.doNotTrack}},language:{lang:null},title:{title:null},"field_category.und[0].taxonomy_term":{topic:"name"},"field_category.und[1].taxonomy_term":{subtopic:"name"}});var x,D,k,L,C={tag:(x={metatag:{name:"name",value:"content"},metatag_dc:{name:"name",value:"content"},metatag_twitter_cards:{name:"name",value:"content"},metatag_property:{name:"property",value:"content"},metatag_link_rel:{name:"rel",value:"href"}},D=r("{{ tag['#attached']['drupal_add_html_head'][0][0]['#weight'] }}"),k={name:r("{{ tag['#attached']['drupal_add_html_head'][0][0]['#name'] }}"),value:r("{{ tag['#attached']['drupal_add_html_head'][0][0]['#value'] }}"),theme:r("{{ tag['#attached']['drupal_add_html_head'][0][0]['#theme'] }}"),weight:D},L={weight:D,html:function(t){t=a.bindData(t,k);var e=x[t.theme];return angular.isString(t.weight)&&""!==t.weight.trim()&&e?'<meta class="angular-metatag" '+e.name+'="'+t.name+'" '+e.value+'="'+t.value+'" />':null}},function(t){return a.bindData({tag:t},L)})};return c.metatags=a.scaffoldGetter({metatags:{titleMetatag:function(t,e){return r("{{ "+e+".title['#attached'].metatag_set_preprocess_variable[0][2] }}")(t)},metatagList:function(t,e){return l.instantiate(e+".title").assign(t,null),l.instantiate(e+".generator").assign(t,null),a.bindDataList(t,l.instantiate(e),C)}}}),c.banner=a.scaffoldGetter({"field_marketing_banner.und[0]":{marketingLarge:null},"field_marketing_banner_medium.und[0]":{marketingMedium:null},"field_marketing_banner_small.und[0]":{marketingSmall:null},"field_thumbnail.und[0]":{thumbnail:null},"field_banner.und[0]":{banner:null}}),c.customStyles=a.scaffoldGetter({"field_custom_styles.und[0]":{customStyles:function(t,e){var n=l.instantiate(e+".value")(t);return angular.isString(n)&&""!==n.trim()?[].concat(n.match(/(<link)([\s\S]*?)(>)/gm)||[]).concat(n.match(/(<style.*?>)([\s\S]*)(<\/style>)/gm)||[]):[]}}}),c.customScripts=a.scaffoldGetter({"field_custom_scripts.und[0]":{customScripts:function(t,e){var n=l.instantiate(e+".value")(t);if(angular.isString(n)&&""!==n.trim()){try{n=o.decodeURIUnescape(n)}catch(t){n=n.replace(/%/g,"%25"),n=o.decodeURIUnescape(n),n=n.replace(/%25/g,"%")}n=n.match(/(<script)([\s\S]*?)(<\/script>)/gm)||null}else n=null;return n}},"field_custom_scripts_header.und[0]":{customScriptsHeader:function(t,e){var n,a=l.instantiate(e+".value")(t);if(angular.isString(a)&&""!==a.trim()){try{a=o.decodeURIUnescape(a)}catch(t){a=a.replace(/%/g,"%25"),a=o.decodeURIUnescape(a),a=a.replace(/%25/g,"%")}n=a.match(/(<script)([\s\S]*?)(<\/script>)/gim)||null;var i=[],r=[];angular.forEach(n,function(t){var e=t.match(/(src=")([\s\S]*?)(")/im);e?i.push(e[2]):r.push(t)}),n={regularScripts:r,lazyLoadScripts:i}}else n=null;return n}}}),c.supportLegacyGoogleMaps=a.scaffoldGetter({"body.und[0].value":{body:null,getInitFnc:function(){return l.instantiate("INITIALIZATION.init")}}}),c.search=a.scaffoldGetter({nid:{id:null},language:{lang:null},type:{type:null},"field_internal_tags.und":{internalTagList:function(t,e){var n=a.bindDataList(t,l.instantiate(e),b);return n[0]?n:null}}}),c.footnote=a.scaffoldGetter({field_footnote:{footnoteList:null}}),c.book=a.scaffoldGetter({book:{bookId:"bid",pdf:"pdf"},language:{lang:null},title:{title:null},nid:{pageId:null}}),c}]).factory("componentApiService",["$http","$q",function(e,a){var t={getEntity:function(t){t.withCredentials?(e.defaults.headers.common["X-Authorization"]=t.withCredentials,t.withCredentials=!0):(delete e.defaults.headers.common["X-Authorization"],delete t.withCredentials);var n=a.defer();return e(t).success(function(t){n.resolve(t)}).error(function(t,e){n.reject({status:e})}),n.promise}};return t}]).factory("taxonomyService",["defaultTaxonomy","$q",function(n,a){var t={};return t.Handler=function(t){return e=t.id,function(){return n[e]?function(t){var e=a.defer();return e.resolve(n[t]),e.promise}(e):function(){var t=a.defer();return t.resolve(n[3]),t.promise}()};var e},t}]).factory("componentService",["urlConfig","defaultContact","defaultMinisterFooter","staticPageConfig","dataBindingService","lazyloaderFactory","lazyloadFiles","externalLinks","contactUsService","taxonomyService","bodyService","languageService","env","componentDaoService","redirectService","stringService","apiKeys","$q","$compile","$rootScope","$timeout","$filter","$location",function(o,t,u,c,d,f,l,s,g,m,r,p,v,h,_,b,y,S,w,x,e,D,k){function L(t){return t.aggregate=!0,t.mime=new b.FileMime({file:t.url}),t}var n={coreComponent:function(t,e,n,a){var i=d.bindData(t,a);return this.content.id=i.id,this.content.title=i.title,this.content.type=i.type,this.content.lang=i.lang,angular.element(".angular-custom-style").remove(),angular.element(".angular-custom-script").remove(),null},intro:function(t,e,n,a){var i=d.bindData(t,a);return this.content.intro=i.intro,null},archive:function(t,e,n,a){var i=d.bindData(t,a);return this.content.archive_status=i.archive,this.content.archive_title=i.title,this.content.archive_url=i.url,null},greyBox:function(t,e,n,a){var i=d.bindData(t,a);return this.content.greyBox=i.greyBox,null},body:function(t,e,n,a){var i=d.bindData(t,a);return i.url=encodeURIComponent(encodeURI(e.alias)),this.content.body={handler:new r.Handler(i),fetchParams:i.fetchParams},null},toc:function(t,e,n,a){var i=d.bindData(t,a),r=null,l=parseInt(i.enabled2);if(0<l&&(r=D("filter")(i.toc||[],{section:{index:""}}),r=D("orderBy")(r,"section.index"),i.hasFaq)){var o=r[r.length-1],u=o?{prefix:o.section.prefix,index:o.section.index+1}:{prefix:"section-",index:0};u.id=u.prefix+u.index,r.push({title:p.translate("FAQs",i.lang),type:"faqs",section:u})}return this.content.toc=angular.isArray(r)&&r[0]?r:null,this.content.tocStyle=1===l?"ol":"ul",null},ministerFooter:function(t,e,n,a){var i=d.bindData(t,a);return this.ministerFooter=i.id?i:{},null},contact:function(t,e,n,a){var i=d.bindData(t,a),r=s["contact-us"][i.lang]+"?id="+i.id+"&nid="+i.nid;return i.contactUs="develop"===v?_.aliasToPath(r):"https://"+k.$$host+"/"+r,"staticPage"===e.contentType&&(i.contactUs=null),this.contact=i,null},header:function(t,e,n,a){var i=d.bindData(t,a);return this.content.headerType=i.id-0==3275||i.id-0==3276?"serviceontario":"default",this.content.hideTranslation="search-result"===i.type||"query_landing_page"===i.type||"contact_us"===i.type,null},language:function(t,e,n,a){var i=d.bindData(t,a);p.currentLanguage.set(i.lang),angular.element("html").attr("lang",i.lang);var r=p.alternativeLanguage(i.lang).lang,l="";return angular.isObject(i.translations)&&angular.isString(r)&&(l="en"===r?[o.pathPrefix,i.translations[r]].join("/"):[o.pathPrefix,r,i.translations[r]].join("/")),0<(this.content.translation=l).length?(angular.element("head link.hreflang").attr("rel","alternate").attr("hreflang",i.lang).attr("href",b.getFullDomain()+_.aliasToPath(e.alias)),angular.element("head link.hreflang-alt").attr("rel","alternate").attr("hreflang",r).attr("href",b.getFullDomain()+l)):(angular.element("head link.alt-hreflang").attr("rel","").attr("hreflang","").attr("href",""),angular.element("head link.hreflang").attr("rel","").attr("hreflang","").attr("href","")),null},dateChanged:function(t,e,n,a){var i=d.bindData(t,a);return this.content.dateChanged=i.dateChanged,null},landRegistration:function(t,e,n,a){var i=d.bindData(t,a);return this.content.landRegistration=i,null}};n.dataset=function(t,e,n,a){var i=d.bindData(t,a);return i.useCurrentAsEndDate&&(i.dateEnd=(new Date).getTime()),i.fileList=i.internalFileList.concat(i.externalFileList).map(L),i.internalFileList=null,i.externalFileList=null,i.datasetStatusMap=h.datasetStatusMap,this.content.dataset=i,null},n.tradeCalendar=function(t,e,n,a){var i=d.bindData(t,a);return this.content.tradeCalendar=i,null},n.orderInCouncil=function(t,e,n,a){var i=d.bindData(t,a);return this.content.orderInCouncil=i,null},n.featsDetail=function(t,e,n,a){var i=d.bindData(t,a);return this.content.featsDetail=i,null},n.dateFirstPublished=function(t,e,n,a){var i=d.bindData(t,a);return this.content.dateFirstPublished=i.dateFirstPublished,null},n.right=function(t,e,n,a){var i=d.bindData(t,a);return this.content.right=i.right,i.right&&this.content.toc&&this.content.toc.push({title:"fr"===t.language?"Liens connexes":"Related",section:{id:"section-related"}}),null},n.footnote=function(t,e,n,a){var i=d.bindData(t,a);return this.content.footnoteList=i.footnoteList,null},n.tags=function(t,e,n,a){var i=d.bindData(t,a);return i.tagList=d.bindDataList(i.tagList,null,h.getterTag),this.content.tags=i,null},n.breadcrumbs=function(){var t=this.content.tags.tagList||[],e=this.content.params.alias,n=[],a="page/government-ontario"===e||"fr/page/gouvernement-de-lontario"===e;if(t.length&&!a&&(n=t.filter(function(t){return t.name&&t.landingPageLink&&t.landingPageLink&&t.landingPageLink.value!==e&&"Gazette"!==t.name}).map(function(t){return{name:t.name,path:"/"+t.landingPageLink.value}})),n.length){var i={name:"Home",path:"/page/government-ontario"};"fr"===this.content.lang&&(i={name:"Accueil",path:"/fr/page/gouvernement-de-lontario"}),n.unshift(i),this.content.tags.breadcrumb=n,this.content.tags.tagList=[]}};function C(t){function a(t,e){var n=this,a=d.bindData(t,h.coreComponent.getter);n.lang=a.lang,a=d.bindData(t,h.contact.getter),n.contactId=a.id,a=d.bindData(t,h.ministerFooter.getter),n.ministryId=a.id,a=d.bindData(t,e),n.telephone=a.telephone,n.mailingAddress=a.mailingAddress,n.noticeOfCollection=a.noticeOfCollection,n.body=a.body,n.id=a.id}var i,r,l;return i=t.getter,l=function(){if(r){if(!e(this.contentNodeId))return;(function(){var e,n=this;g.getContactNode(n.fields,n.fetchParams,n.contentNodeId).then(function(t){"book"===(e=d.bindData(t.content,h.coreComponent.getter)).type&&(e=d.bindData(t.content,h.book.getter),n.title=e.title),a.call(n,t.content,i),r.resolve(t.content)},function(){r.reject()})}).call(this)}else{if(r=S.defer(),!e(this.contentNodeId))return r.promise;(function(){var e,n=this;g.getContactNode(n.fields,n.fetchParams,n.contentNodeId).then(function(t){"book_page"===(e=d.bindData(t.content,h.coreComponent.getter)).type?(e=d.bindData(t.content,h.book.getter),n.contentNodeId=e.bookId,n.alias=t.alias,l.call(n)):(n.alias=t.alias,n.title=e.title,a.call(n,t.content,i),r.resolve(t.content))},function(){r.reject()})}).call(this)}return r.promise};function e(t){var e=!!t;return e||r.reject(),e}}n.contactUs=function(t,e,n,a){var i=this,r=S.defer(),l=d.bindData(t,a);return l.alias=c.contactUs[l.lang].alias,l.ministryId=u[l.lang].id,l.contentNodeId||("fr"===l.lang?l.contentNodeId="58776":l.contentNodeId="56934"),new C({getter:a}).call(l).then(function(t){i.content.contactUs=angular.extend(l,{handler:new g.Handler(l)}),i.contact=d.bindData(t,h.contact.getter),i.ministerFooter=d.bindData(t,h.ministerFooter.getter),r.resolve()},function(){i.content.contactUs={lang:l.lang,handler:new g.Handler(l)},r.resolve()}),r.promise},n.ministry=function(t,e,n,a){var i=d.bindData(t,a);return this.content.ministry=i.ministry,null},n.taxonomy=function(t,e,n,a){var i=this.content;i.taxonomies=null;var r=S.defer(),l=d.bindData(t,a);return new m.Handler(l)().then(function(t){var e=d.bindData(t,l.getterTaxonomies);i.taxonomies=e.taxonomyList,r.resolve()},function(){r.resolve()}),r.promise};var I;function P(t){t.map(function(t){$(["script[src^=",t,"]"].join('"')).remove()})}n.documentEmbedded=function(t,e,n,a){var i=S.defer(),r=d.bindData(t,a),l=this.content;l.documentEmbeddedInfo={fileSize:r.fileSize,datePublished:r.datePublished};var o=angular.isNumber(r.id)?r.id.toString():r.id,u=angular.isString(o);if(u&&(o=o.trim(),u=""!==o&&("46530"===o||"46531"===o)),r.documentViewer.enable=u,l.documentEmbedded=u?r.fileScript.content||"":function(t){return angular.isString(t)?t.replace(/(.*<.*script.*)(.*?DV.load.*?\(.*?['"].*?['"].*?,.*?{.*?}.*?\).*?;?)(.*)/,"$1$3"):""}(r.fileScript.content),l.documentViewer=r.documentViewer,angular.isString(r.fileScript.urlJs)){var c,s=null;window.DV=window.DV||{},angular.isFunction(window.DV.loadJSON)&&(s=window.DV.loadJSON),window.DV.loadJSON=function(t){c=t},f.load(f.instantiate("jsonp"),r.fileScript.urlJs).then(function(){var t=d.bindData(c,r.getterDocInfo);(l.documentEmbeddedInfo=t,l.documentEmbeddedInfo.fileSize=r.fileSize,l.documentEmbeddedInfo.datePublished=r.datePublished,angular.element(["script[src^=",r.fileScript.urlJs,"]"].join('"')).remove(),window.DV.loadJSON=angular.isFunction(s)?s:null,u)?f.load(f.instantiate("javascript"),r.documentViewer.urlJs).then(function(){if(angular.isFunction(s))window.DV.viewers={},angular.element(".document-viewer-page-css").remove(),angular.element("style[id^=DV-navigationBolds-]").remove();else{var t=angular.element("head");t.append(w(r.documentViewer.css)(x)),t.append(w(r.documentViewer.cssPrint)(x))}i.resolve()},function(){i.resolve()}):i.resolve()},function(){angular.element(["script[src^=",r.fileScript.urlJs,"]"].join('"')).remove(),window.DV.loadJSON=angular.isFunction(s)?s:null,i.resolve()})}else i.resolve();return i.promise},n.loadOnesiteTablesConditionally=function(t,e,n,a){var i=d.bindData(t,a),r=f.instantiate("module",i.moduleName);return i.valid?f.load(r,{name:i.moduleName,files:l[i.moduleName]}):null},n.analytics=function(t,e,n,a){if(angular.isFunction(window.ga)){var i=d.bindData(t,a);if(angular.isObject(n)){var r=new RegExp("(.*)/("+e.alias+".*)");i.alias=e.absUrl.replace(r,"$2")}else i.alias=e.alias;if(i.ministry&&ga("set","dimension1",i.ministry),i.lang&&ga("set","dimension2",i.lang),t.field_category){for(var l="",o=0;o<t.field_category.und.length;o++){l+=(l?"|":"")+t.field_category.und[o].taxonomy_term.name}ga("set","dimension4",l)}if(i.alias){var u=i.alias.split("/")[0===i.alias.indexOf("fr/")?1:0];ga("set","dimension6",u)}ga("set",{page:i.alias,title:i.title}),ga("send","pageview"),-1===window.location.hostname.indexOf("beta")&&"production"===v&&"ServiceOntario"===i.ministry&&ga("ServiceOntario.send","pageview",{page:i.alias,title:i.title})}return null},n.supportLegacyGoogleMaps=(I=/(.*cque.*\[)(.*)(.*?\]).*/,function(t,e,n,a){var i=d.bindData(t,a),r=function(t){var e={legacyMap:[],dependency:[]};return(I.test(t)?JSON.parse(t.replace(/(\r\n|\n|\r)/gm,"").replace(I,"[$2]")):[]).map(function(t){-1<t.indexOf("jquery")?e.dependency.push(t):e.legacyMap.push(t)}),e}(i.body),l=null;return r.legacyMap[0]&&!window.loadGoogleMapApi()&&(l=function(){var t=S.defer(),e=document.createElement("script");return e.type="text/javascript",e.src="https://web.archive.org/web/20200215135818/https://maps.google.com/maps/api/js?v=3&key="+y.googleMaps+"&libraries=geometry&callback=loadGoogleMapApi&region=CA",window.loadGoogleMapApi(t),$("head").append(e),t.promise}()),r.legacyMap[0]&&(this.content.legacyGoogleMapLoader=function(){var t=S.defer(),e=[];return r.dependency.map(function(t){-1<t.indexOf("custom")&&e.push(t)}),f.load(f.instantiate("jsonp"),e).then(function(){f.load(f.instantiate("jsonp"),r.legacyMap).then(function(){angular.isFunction(i.getInitFnc(window))?(i.getInitFnc(window)(),window.INITIALIZATION.init=null,P(r.legacyMap),t.resolve()):(P(r.legacyMap),t.reject())},function(){P(r.legacyMap),t.reject()})},function(){t.reject()}),t.promise}),l}),n.search=function(t,e,n,a){var i=d.bindData(t,a);return this.content.search={internalTagList:angular.isArray(i.internalTagList)?i.internalTagList.map(function(t){return t.name}):[]},null},n.metatags=function(t,e,n,a){var i=d.bindData(t,a);if("book_page"===this.content.type){var r=t.crumbs[0].title.replace(/(<([^>]+)>)/gi,"");i.titleMetatag=r+("fr"===t.language?" : ":": ")+i.titleMetatag}void 0!==this.content.archive_status&&(i.titleMetatag=t.title),this.content.titleMetatag=i.titleMetatag;var l=D("orderBy")(i.metatagList,"tag.weight");angular.element('meta[class="angular-metatag"]').remove();var o=angular.element("head");return angular.forEach(l,function(t){angular.isString(t.tag.html)&&""!==t.tag.html.trim()&&o.append(t.tag.html)}),null};function M(t){return n=t.customStyles,function(){var e=angular.element("head");angular.forEach(n,function(t){e.append(angular.element(t).addClass("angular-custom-style"))})};var n}n.customStyles=function(t,e,n,a){var i=d.bindData(t,a);return this.content.customStyles={handler:angular.isArray(i.customStyles)?new M(i):null},null};function F(t){var e,n;return e=t.customScripts,n=t.customScriptsHeader,function(){(angular.isObject(n)?f.load(f.instantiate("jsonp"),n.lazyLoadScripts):function(){var t=S.defer();return t.resolve(),t.promise}()).then(function(){!function(t){if(angular.isObject(t)){var e=angular.element("head");angular.forEach(t.regularScripts,function(t){e.append(angular.element(t).addClass("angular-custom-script"))})}}(n),function(t){var e=angular.element("body");angular.forEach(t,function(t){e.append(angular.element(t).addClass("angular-custom-script"))})}(e)})}}var N;function a(t,e){var n=t[e];return n.type=e,n}function i(t){var e={small:t.marketingSmall||null,medium:t.marketingMedium||null,large:t.marketingLarge||null,type:"marketing"};return e}return n.customScripts=function(t,e,n,a){var i=d.bindData(t,a);return this.content.customScripts={handler:angular.isArray(i.customScripts)||angular.isObject(i.customScriptsHeader)?new F(i):null},null},n.banner=(N={marketingLarge:i,marketingMedium:i,marketingSmall:i,thumbnail:a,banner:a},function(t,e,n,a){var i=d.bindData(t,a);for(var r in this.content.banner={},N)if(i[r]){this.content.banner=N[r](i,r);break}return null}),n.book=function(t,e,n,a){var i=d.bindData(t,a);return this.content.book={id:i.bookId,isParent:i.bookId===i.pageId,page:{current:{id:i.pageId,title:i.title}},title:"",lang:i.lang,toc:{init:null,toggleOffcanvas:null},url:{pdf:i.pdf},enable:i.bookId&&i.pageId},null},n}]).factory("phoneNumberService",[function(){function i(t){return t.replace(/[a-z]/gi,function(t){return"22233344455566677778889999"["abcdefghijklmnopqrstuvwxyz".indexOf(t.toLowerCase())]})}function r(t){return t.substr(0,3)+"-"+t.substr(3,t.length)}function l(t,e,n){return function(t,e,n){return(t=""!==t?t+n:t)+e+n}("8"!==t[0]&&"9"!==t[0]||t[1]!==t[2]?"":"1",t,n)+r(e)}return{tel:function(t){return 10===(t=i(t).replace(/[^\d]/g,"")).length?"+1"+t:11===t.length&&"1"===t[0]?"+"+t:t},display:function(t,e){"fr"!==e&&(e="en");var n=(t=t.trim()).replace(/[^0-9a-z]/gi,"").length;if((7===n||10===n||11===n&&/^[^\d]*1/.test(t))&&(t=function(t,e){var n=t.replace(/[^0-9a-z]/gi,""),a="fr"===e?" ":"-",i=n.length;return 7===i?r(n):10===i?l(n.substr(0,3),n.substr(3,i),a):11===i?l(n.substr(1,3),n.substr(4,i),a):t}(t,e),/[A-Z]/i.test(t))){var a=t.match(/^([^a-z]*)/i)[0].replace(/[.*-]$/,"");t=a+"-"+t.split(a)[1].replace(/[^0-9a-z]/gi,"")}return function(t){var e=t.match(/^([^a-z]*)([a-z].*)?$/i)[2];return e?t+" ("+i(e)+")":t}(t)}}}]).factory("graphService",["htmlParsingService","numberService","colourService",function(s,d,c){var t={tableToHeaders:function(t,e){var n={},a=s.elementsToArray(t.querySelectorAll("thead th"));if(a.shift(),a=a.filter(function(t){return void 0===t["no-graph"]}),n.numeric=a.filter(function(t){return-1===t.classes.indexOf("non-numeric")}),n.numeric.forEach(function(t,e){t.graph_index=e}),e){e=e.toLowerCase();for(var i=0,r=n.numeric.length;i<r;i++){var l=n.numeric[i];if(l.text.toLowerCase()===e||l.id&&l.id.toLowerCase()===e){n.numeric=[n.numeric[i]];break}}}return n.note=a.find(function(t){return-1!==t.classes.indexOf("non-numeric")}),n},tableToRows:function(t,n,a){for(var e=[],i=t.querySelectorAll("tbody tr"),r=function(t){var e=u[t.index];return e.number=d.stringToFloat(e.text,a)||0,n.note&&(e.note=u[n.note.index]),e},l=0,o=i.length;l<o;l++){var u=s.elementsToArray(i[l].querySelectorAll("th, td")),c=u[0];c.data=n.numeric.map(r),e.push(c)}return e},colourize:function(t,a,e,n){function i(t,e){return t.map(function(t){return t["graph-colour"]?t.background=c.getHex(t["graph-colour"]):(t.background=c.distinctColour(e),e++),t.colour=c.contrastColour(t.background),t})}var r,l,o="simple"===e&&a.note;if(o){r=[];var u=[];t.forEach(function(t){-1===u.indexOf(t.data[0].note.text)&&(r.push(t.data[0].note),u.push(t.data[0].note.text))}),r=i(r,n)}else a.numeric=i(a.numeric,n);return t.forEach(function(t){t.data.forEach(function(e,t){var n=a.numeric[t];o&&(n=r.find(function(t){return t.text===e.note.text})),e.background=n.background,e.colour=n.colour})}),"stacked"===e?l=a.numeric:o&&(l=r),{rows:t,legend:l}},calculateBarWidths:function(t,n){var a=0,i=0,r=[];t.forEach(function(t,e){r.push(0),t.data.forEach(function(t){"stacked"===n.type&&(t.number=Math.abs(t.number)),r[e]+=t.number,"grouped"===n.type&&(a=Math.max(a,t.number),i=Math.min(i,t.number))}),"grouped"!==n.type&&(a=Math.max(a,r[e]),i=Math.min(i,r[e]))});function l(t,e){return e=e||a-i,98*Math.abs(t)/e}var o=i<0&&0<a,u=n.subtype&&"100%"===n.subtype;return t.forEach(function(t,e){t.data.forEach(function(t){t.percentage=l(t.number,!!u&&r[e]),t.percentagePadding=o?l(i-Math.min(t.number,0)):0})}),{rows:t,mixed:o}}};return t}]).factory("timelineFilterService",["stringService",function(o){var t={categoriesStringToArray:function(t){return t.split(" ")},tidyCategory:function(t){var e=t.replace(/-/g," ");return e.charAt(0).toUpperCase()+e.slice(1)},filterSelections:function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&!0===t[n]&&e.push(n);return e},filterLogic:function(t,e,n,a,i){i=i.toLowerCase();var r=o.html(a),l=o.html(i);return t=t.toLowerCase(),a=a.toLowerCase(),n=n||"",!(void 0!==e&&0<e.length&&!e.includes(n))&&!(t&&a.search(t)<0&&r.search(t)<0&&i.search(t)<0&&l.search(t)<0)}};return t}]).factory("timelineDataService",[function(){return{categories:[],filterOptions:{},selectedFiltersArray:[],keyword:""}}]);
/*
     FILE ARCHIVED ON 13:58:18 Feb 15, 2020 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 21:03:10 Mar 20, 2020.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
*/
/*
playback timings (ms):
  load_resource: 66.861
  PetaboxLoader3.datanode: 100.975 (5)
  esindex: 0.015
  RedisCDXSource: 6.115
  CDXLines.iter: 82.492 (4)
  PetaboxLoader3.resolve: 61.003
  captures_list: 1143.933
  exclusion.robots: 0.196
  LoadShardBlock: 120.704 (4)
  exclusion.robots.policy: 0.183
*/